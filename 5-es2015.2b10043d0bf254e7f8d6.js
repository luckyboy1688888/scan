(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+YbL":function(t,e,a){"use strict";a.r(e),a.d(e,"ProjectModule",function(){return Je});var i=a("ofXK"),n=a("5wG6"),o=a("DKVz"),r=a("NFeN"),c=a("d3UM"),s=a("kmnG"),l=a("qFsG"),d=a("bTqV"),h=a("+0xr"),p=a("0IaG"),m=a("tyNb"),g=a("1G5W"),b=a("jtHE"),u=a("wd/R"),f=a("fXoL"),x=a("ZBI1"),y=a("p+kU"),w=a("veZE"),C=a("IIp6"),v=a("22X/");function _(t,e){1&t&&(f.Wb(0,"p",5),f.Kc(1,"OFF"),f.Vb())}function O(t,e){1&t&&(f.Wb(0,"p",6),f.Kc(1,"ON"),f.Vb())}let S=(()=>{class t{constructor(){this.check=new f.o,this.cctvCheck=!1}ngOnInit(){this.check.emit(this.cctvCheck)}openCCTV(){this.cctvCheck=!this.cctvCheck,this.check.emit(this.cctvCheck)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Kb({type:t,selectors:[["app-cctv-switch"]],outputs:{check:"check"},decls:5,vars:2,consts:[[1,"switch"],["class","off",4,"ngIf"],["type","checkbox",3,"change"],[1,"slider"],["class","on",4,"ngIf"],[1,"off"],[1,"on"]],template:function(t,e){1&t&&(f.Wb(0,"label",0),f.Ic(1,_,2,0,"p",1),f.Wb(2,"input",2),f.dc("change",function(){return e.openCCTV()}),f.Vb(),f.Rb(3,"span",3),f.Ic(4,O,2,0,"p",4),f.Vb()),2&t&&(f.Eb(1),f.nc("ngIf",!e.cctvCheck),f.Eb(3),f.nc("ngIf",e.cctvCheck))},directives:[i.n],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:34px;height:72px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ad2364;border-radius:17px}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";background-image:url(cctvP.fad5e6a559f5d591ea40.png);background-size:26px 26px;height:26px;width:26px;left:3.5px;top:43px;background-color:#fff;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#38b7a9}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateY(-40px);background-image:url(cctvG.d0ab3f7f15c50ca3004b.png)}.on[_ngcontent-%COMP%]{bottom:-23.5px;left:5px}.off[_ngcontent-%COMP%], .on[_ngcontent-%COMP%]{z-index:1000;position:relative;font-size:16.5px;color:#fff}.off[_ngcontent-%COMP%]{top:9.5px;left:1px}']}),t})();var k=a("sa1H");function M(t,e){if(1&t){const t=f.Xb();f.Wb(0,"div",2),f.Wb(1,"app-card1x1",3),f.Rb(2,"img",4),f.Vb(),f.Wb(3,"app-card1x1",5),f.Rb(4,"img",4),f.Vb(),f.Wb(5,"app-card1x1",6),f.Rb(6,"img",4),f.Vb(),f.Wb(7,"app-card1x1",7),f.Rb(8,"img",4),f.Vb(),f.Wb(9,"app-card1x1",8),f.Rb(10,"img",4),f.Vb(),f.Wb(11,"app-card1x1",9),f.Rb(12,"img",4),f.Vb(),f.Wb(13,"app-card1x1",10),f.Rb(14,"img",4),f.Vb(),f.Wb(15,"app-card1x1",11),f.Rb(16,"img",4),f.Vb(),f.Wb(17,"app-card1x1",12),f.Rb(18,"img",4),f.Vb(),f.Wb(19,"app-card1x1",13),f.Rb(20,"img",4),f.Vb(),f.Wb(21,"div",14),f.Rb(22,"app-map-control",15),f.Wb(23,"app-cctv-switch",16),f.dc("check",function(e){return f.Ac(t),f.hc().cctvCheck(e)}),f.Vb(),f.Vb(),f.Vb()}if(2&t){const t=f.hc();f.Eb(1),f.nc("CardSetting",t.cctvCard[0].card),f.Eb(1),f.oc("src",t.cctvCard[0].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[9].card),f.Eb(1),f.oc("src",t.cctvCard[9].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[1].card),f.Eb(1),f.oc("src",t.cctvCard[1].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[8].card),f.Eb(1),f.oc("src",t.cctvCard[8].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[2].card),f.Eb(1),f.oc("src",t.cctvCard[2].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[3].card),f.Eb(1),f.oc("src",t.cctvCard[3].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[4].card),f.Eb(1),f.oc("src",t.cctvCard[4].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[5].card),f.Eb(1),f.oc("src",t.cctvCard[5].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[6].card),f.Eb(1),f.oc("src",t.cctvCard[6].url,f.Cc),f.Eb(1),f.nc("CardSetting",t.cctvCard[7].card),f.Eb(1),f.oc("src",t.cctvCard[7].url,f.Cc)}}const P='.container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item0 switch . . . item1" "item2 switch . . . item3" "item4 item5 item6 item7 item8 item9"}.item0[_ngcontent-%COMP%]{grid-area:item0;z-index:1}.item1[_ngcontent-%COMP%]{grid-area:item1;z-index:1}.item2[_ngcontent-%COMP%]{grid-area:item2;z-index:1}.item3[_ngcontent-%COMP%]{grid-area:item3;z-index:1}.item4[_ngcontent-%COMP%]{grid-area:item4;z-index:1}.item5[_ngcontent-%COMP%]{grid-area:item5;z-index:1}.item6[_ngcontent-%COMP%]{grid-area:item6;z-index:1}.item7[_ngcontent-%COMP%]{grid-area:item7;z-index:1}.item8[_ngcontent-%COMP%]{grid-area:item8;z-index:1}.item9[_ngcontent-%COMP%]{grid-area:item9;z-index:1}@media (max-width:1024px){.container[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,minmax(250px,32%));grid-template-areas:"item0 item0 . . item8 item8" "item2 item2 switch . item7 item7" "item4 item4 item5 item5 item6 item6"}.item1[_ngcontent-%COMP%], .item3[_ngcontent-%COMP%], .item9[_ngcontent-%COMP%], .map-layout-control[_ngcontent-%COMP%]{display:none}}@media (max-width:800px){.container[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;padding-top:16px;gap:0 16px;grid-template-columns:repeat(1,minmax(100px,100%));grid-template-rows:auto;grid-template-areas:"item0" "item2" "item4" "item5" "item6" "item7" "item8" "item9" "item3" "item1"}div.cctv-switch[_ngcontent-%COMP%]{display:none}.item0[_ngcontent-%COMP%], .item1[_ngcontent-%COMP%]{max-width:95vw}.item1[_ngcontent-%COMP%]{display:block}.item2[_ngcontent-%COMP%], .item3[_ngcontent-%COMP%]{max-width:95vw}.item3[_ngcontent-%COMP%]{display:block}.item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%], .item7[_ngcontent-%COMP%], .item8[_ngcontent-%COMP%], .item9[_ngcontent-%COMP%]{max-width:95vw}.item9[_ngcontent-%COMP%]{display:block}}img[_ngcontent-%COMP%]{width:100%;height:calc(100% + 3px)}.cctv-switch[_ngcontent-%COMP%]{grid-area:switch;position:relative;width:52px;margin-top:auto;z-index:1;bottom:0;left:0;display:flex;flex-direction:row;align-items:flex-end}.map-layout-control[_ngcontent-%COMP%]{margin-right:12px}.map-explan-target[_ngcontent-%COMP%]{grid-area:explan;z-index:1;margin-top:auto;margin-left:auto}.selectCCTV[_ngcontent-%COMP%]{width:100%;font-size:16px;min-height:48px;border-radius:5px;font-weight:600}.dialog-btn[_ngcontent-%COMP%]{margin-right:20px;color:#fff;background-color:#38b7a9}.center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{justify-content:center}.img-btn[_ngcontent-%COMP%]{color:#fff;background-color:#38b7a9;margin-bottom:10px;font-size:16px;font-weight:600}';let D=(()=>{class t{constructor(t,e,a,i){this.dialog=t,this.centerSvc=e,this.cctvAdvanceSvc=a,this.changeDetection=i,this.defultCctv=[],this.cctvCard=[],this.now=u().format("YYYY/MM/DD HH:mm"),this.destroyed$=new b.a(1)}ngOnInit(){this.cctvAdvanceSvc.initCctv(),this.cctvAdvanceSvc.cctvData$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{Object.keys(t).length>0&&(this.defultCctv.length=0,this.defultCctv=localStorage.getItem("app-cctv-advanced")?JSON.parse(localStorage.getItem("app-cctv-advanced")):this.cctvAdvanceSvc.defultCctvPosition.map(e=>t[e]),this.cctvCard.length=0,this.defultCctv.forEach((t,e)=>{t||(t={url:"",img:"",name:"\u7121\u8cc7\u6599"}),this.cctvCard.push({url:t.url,img:t.img,card:{dialog:this.dialog,belong:"cctv",icon:"assets/icons/card/icon-cctv.png",title:t.name,updateTime:this.now,openFilter(){this.dialog.open($,{width:"800px",data:e})},openLarge(){this.dialog.open(V,{width:"60vw",data:e})},actionsOn:!1,latlng:[t.lat,t.lng]},idx:e})}),this.cctvAdvanceSvc.cctvData=this.cctvCard)}),this.cctvRefresh=setInterval(()=>{this.cctvCard.length>0&&(this.cctvCard=this.cctvCard.map(t=>{const e=t.url,a=e.length,i=Math.floor((new Date).getTime()/1e3);return t.url="&dump="===e.substring(a-16,a-10)?e.substring(0,a-10)+i:e+"&dump="+i,t}))},1500),this.cctvAdvanceSvc.cctvFilter$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=this.cctvAdvanceSvc.roadFilter[t.roadsection],a={dialog:this.dialog,belong:"cctv",icon:"assets/icons/icon-cctv.png",title:e.name,updateTime:this.now,openFilter(){this.dialog.open($,{width:"50vw",data:t.idx})},openLarge(){this.dialog.open(V,{width:"60vw",data:t.idx})},actionsOn:!1,latlng:[e.lat,e.lng]};this.cctvCard[t.idx].url=e.url,this.cctvCard[t.idx].img=e.img,this.cctvCard[t.idx].card=a,this.cctvAdvanceSvc.cctvData=this.cctvCard}),this.cctvAdvanceSvc.cctvSelect$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{if(t.length>0){const e=[];this.cctvCard.forEach(t=>{e.push({lng:t.card.latlng[1],lat:t.card.latlng[0],name:t.card.title,url:t.url})});let a=[...t,...e];for(;a.length>10;)a.pop();this.cctvCard.length=0,a.forEach((t,e)=>{this.cctvCard.push({url:t.url,img:t.img,card:{dialog:this.dialog,belong:"cctv",icon:"assets/icons/icon-cctv.png",title:t.name,updateTime:this.now,openFilter(){this.dialog.open($,{width:"800px",data:e})},openLarge(){this.dialog.open(V,{width:"60vw",data:e})},actionsOn:!1,latlng:[t.lat,t.lng],help:"\u5c0f\u5e6b\u624b \n\u5c0f\u5e6b\u5e6b\u5e6b\u624b"},idx:e})}),this.cctvAdvanceSvc.cctvData=this.cctvCard,this.changeDetection.detectChanges()}})}cctvCheck(t){this.centerSvc.mapSwitch$.next(t)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),clearInterval(this.cctvRefresh);const t=[];this.cctvAdvanceSvc.cctvData.forEach(e=>{t.push({img:e.img,lat:e.card.latlng[0],lng:e.card.latlng[1],name:e.card.title,url:e.url})}),localStorage.setItem("app-cctv-advanced",JSON.stringify(t))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(y.a),f.Qb(f.h))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-cctv-advanced"]],decls:2,vars:1,consts:[["class","container",4,"ngIf"],[1,"bg-map"],[1,"container"],[1,"item0",3,"CardSetting"],["alt","",3,"src"],[1,"item1",3,"CardSetting"],[1,"item2",3,"CardSetting"],[1,"item3",3,"CardSetting"],[1,"item4",3,"CardSetting"],[1,"item5",3,"CardSetting"],[1,"item6",3,"CardSetting"],[1,"item7",3,"CardSetting"],[1,"item8",3,"CardSetting"],[1,"item9",3,"CardSetting"],[1,"cctv-switch"],[1,"map-layout-control"],[3,"check"]],template:function(t,e){1&t&&(f.Ic(0,M,24,20,"div",0),f.Rb(1,"app-main-map",1)),2&t&&f.nc("ngIf",0!==e.cctvCard.length)},directives:[i.n,w.a,C.a,v.a,S],styles:[P]}),t})(),V=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.cctvAdvanceSvc=e,this.idx=a,this.src="",this.img="",this.src=this.cctvAdvanceSvc.cctvData[a].url,this.img=this.cctvAdvanceSvc.cctvData[a].img,this.refresh=setInterval(()=>{const t=this.src,e=t.length,a=Math.floor((new Date).getTime()/1e3);this.src.length>0&&(this.src="&dump="===t.substring(e-16,e-10)?t.substring(0,e-10)+a:t+"&dump="+a)},1500),t.beforeClosed().subscribe(()=>clearInterval(this.refresh))}openImg(){window.open(this.img,"cctv","height=500,width=750")}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(y.a),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["cctv-advanced-large-dialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],[1,"img-center"],["alt","",3,"src"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"button",1),f.dc("click",function(){return e.openImg()}),f.Kc(2," \u958b\u555f\u65b9\u5411\u5716 "),f.Vb(),f.Wb(3,"button",2),f.Wb(4,"mat-icon"),f.Kc(5,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(6,"div",3),f.Rb(7,"img",4),f.Vb()),2&t&&(f.Eb(7),f.oc("src",e.src,f.Cc))},directives:[p.h,d.a,p.d,r.a],styles:[P]}),t})(),$=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.cctvAdvanceSvc=e,this.idx=a,this.filterRoad="",this.roadList=[],this.filterIdx=a,this.roadList=this.cctvAdvanceSvc.roadList}sure(){this.filterRoad&&this.cctvAdvanceSvc.cctvFilter$.next({roadsection:this.filterRoad,idx:this.filterIdx}),this.dialogRef.close()}close(){this.dialogRef.close()}getRoad(t){this.filterRoad=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(y.a),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["cctv-advanced-filter-dialog"]],decls:7,vars:1,consts:[[1,"center"],[3,"list","getName"],[1,"btn"],["mat-raised-button","","type","submit",1,"button-filter-sure",3,"click"],["mat-raised-button","","type","submit",1,"button-filter-cancel",3,"click"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"app-autocomplete-single",1),f.dc("getName",function(t){return e.getRoad(t)}),f.Vb(),f.Wb(2,"mat-dialog-actions",2),f.Wb(3,"button",3),f.dc("click",function(){return e.sure()}),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",4),f.dc("click",function(){return e.close()}),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("list",e.roadList))},directives:[k.a,p.c,d.a],styles:[P]}),t})();var W=a("XNiG"),I=a("l5mm"),E=a("Kj3r"),L=a("JX91"),R=a("pLZG");let T=(()=>{class t{constructor(t){this.centerSVC=t,this.include="crowd",this.start=!1,this.NewAPISwitch=!1,this.crowdPlace$=new W.a,this.crowdTotal$=new W.a,this.crowdMrt$=new W.a,this.crowdCvp$=new W.a,this.crowdHeatMap$=new W.a,this.crowdRank$=new W.a,this.crowdCityRank$=new W.a,this.dynamicTimer={crowdPlace:36e5,crowdTotal:3e5,crowdMrt:9e5,crowdCvp:6e5,crowdHeatMap:6e5,crowdRank:6e5,crowdCityRank:6e5},this._0=this.centerSVC.pages$.pipe(Object(E.a)(100)).subscribe(t=>{t[this.include]&&t[this.include]>0?(this.NewAPISwitch=!0,this.getNext(this.crowdTotal$,"/api/people/cvp_popu_total"),this.getNext(this.crowdCvp$,"/api/people/cvp_twrt_count"),this.getNext(this.crowdPlace$,"/api/people/cvp_popu_24hr"),this.getNext(this.crowdMrt$,"/api/people/mrt_count"),this.getNext(this.crowdHeatMap$,"/api/people/cvp_rt_grid_count"),this.getNext(this.crowdRank$,"/api/people/cvp_area_rank"),this.getNext(this.crowdCityRank$,"/api/people/cvp_twrt_city_count")):this.NewAPISwitch=!1}),this._1=Object(I.a)(this.dynamicTimer.crowdTotal).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdTotal$,"/api/people/cvp_popu_total")}),this._2=Object(I.a)(this.dynamicTimer.crowdCvp).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdCvp$,"/api/people/cvp_twrt_count")}),this._3=Object(I.a)(this.dynamicTimer.crowdPlace).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdPlace$,"/api/people/cvp_popu_24hr")}),this._4=Object(I.a)(this.dynamicTimer.crowdMrt).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdMrt$,"/api/people/mrt_count")}),this._5=Object(I.a)(this.dynamicTimer.crowdHeatMap).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdHeatMap$,"/api/people/cvp_rt_grid_count")}),this._6=Object(I.a)(this.dynamicTimer.crowdRank).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdRank$,"/api/people/cvp_area_rank")}),this._7=Object(I.a)(this.dynamicTimer.crowdCityRank).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.crowdCityRank$,"/api/people/cvp_twrt_city_count")})}getNext(t,e){this.start=!0,this.centerSVC.get(e).subscribe(e=>{t.next(e)})}}return t.\u0275fac=function(e){return new(e||t)(f.ac(x.a))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.crowdSVC=a,this.destroyed$=new b.a(1),this.peopleRata=0,this.count=0,this.now=u().format("YYYY/MM/DD HH:mm"),this.crowd_now={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/icon-people.png",title:"\u5373\u6642\u5834\u5167\u4eba\u6578",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a10\u5206\u9418\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u4e2d\u83ef\u96fb\u4fe1CVP\u8cc7\u6599(G3\u63d0\u4f9b\u6d3b\u52d5\u7bc4\u570d\u5167\u5373\u6642\u7e3d\u4eba\u6f6e\u53ca\u8f2a\u5ed3\u7d71\u8a08\u8207\u79fb\u5165\u65b9\u5411\u6578\u64da-\u7121\u6392\u5c45\u6c11)\n\n3. \u5176\u4ed6\u8aaa\u660e\uff1a\n\n  (1)\u6eff\u5834\u7387=\u5373\u6642\u5834\u5167\u4eba\u6578/\u5834\u5730\u53ef\u5bb9\u7d0d\u4eba\u6578\n\n  (2)\u5834\u5730\u53ef\u5bb9\u7d0d\u4eba\u6578\u5171140,000\u4eba"}}ngOnInit(){this.centerService.component$.next({page:"crowd",exist:!0}),this.crowdSVC.crowdTotal$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=t.data;e[0]&&(this.count=e[0].count,this.peopleRata=Math.round(100*this.count/14e4),this.crowd_now.updateTime=u(e[0].src_time).format("YYYY/MM/DD HH:mm"))})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"crowd",exist:!1})}rateStyle(){return this.peopleRata>=80?"red":this.peopleRata<80&&this.peopleRata>=50?"orange":this.peopleRata<50&&this.peopleRata>=0?"green":this.peopleRata<0?"gray":void 0}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(T))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd-now-people"]],decls:12,vars:6,consts:[[3,"CardSetting"],[1,"full"],[1,"m-top-bot"],[1,"num"],[1,"unit"],[1,"people-rate",3,"ngClass"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Wb(1,"div",1),f.Wb(2,"p",2),f.Wb(3,"span",3),f.Kc(4),f.ic(5,"number"),f.Vb(),f.Rb(6,"span",4),f.Vb(),f.Wb(7,"span",5),f.Wb(8,"span"),f.Kc(9,"\u6eff\u5834\u7387"),f.Vb(),f.Wb(10,"span"),f.Kc(11),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.crowd_now),f.Eb(4),f.Lc(f.jc(5,4,e.count)),f.Eb(3),f.nc("ngClass",e.rateStyle()),f.Eb(4),f.Mc("",e.peopleRata,"%"))},directives:[C.a,i.l],pipes:[i.f],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.m-top-bot[_ngcontent-%COMP%]{margin:10px 0}.num[_ngcontent-%COMP%]{font-size:64px;font-weight:600}@media (max-width:1280px){.num[_ngcontent-%COMP%]{font-size:50px}}@media (max-width:800px){.num[_ngcontent-%COMP%]{font-size:64px}}.unit[_ngcontent-%COMP%]{font-size:36px;font-weight:600}.red[_ngcontent-%COMP%]{background-color:#ad2362}.orange[_ngcontent-%COMP%]{background-color:#e88c26}.green[_ngcontent-%COMP%]{background-color:#83ba45}.gray[_ngcontent-%COMP%]{background-color:#b2b2b1}.people-rate[_ngcontent-%COMP%]{margin:0;padding:6px 12px;text-align:center;width:auto;height:36px;border-radius:20px;color:#fff;white-space:nowrap}.people-rate[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{font-size:24px;line-height:24px}.people-rate[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{font-size:36px;line-height:36px;height:36px}"]}),t})(),K=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.crowdSVC=a,this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.total=0,this.realName=0,this.crowd_total={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/icon-people.png",title:"\u7d2f\u8a08\u5230\u8a2a\u4eba\u6b21",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e(CVP)\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a1\u5c0f\u6642\uff0c\u53d6\u5f97\u505c\u7559\u6642\u959330\u5206\u9418\u4ee5\u4e0a\u7684\u4eba\u6f6e\u8cc7\u6599\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u4e2d\u83ef\u96fb\u4fe1CVP\u8cc7\u6599(E2\u63d0\u4f9b\u6307\u5b9a\u65e5\u671f\u6d3b\u52d5\u7bc4\u5167\u904a\u5ba2\u4eba\u6f6e\u8f2a\u5ed3\u7d71\u8a08\u6578\u64da-\u6392\u9664\u5c45\u6c11)\n\n\u8cc7\u6599\u8aaa\u660e(\u5be6\u806f\u5236)\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1aGoogle\u8868\u55ae\u7531\u73fe\u5834\u4eba\u54e1\u8f38\u5165\u5be6\u806f\u5236\u9032\u5834\u4eba\u6578\n"}}ngOnInit(){this.centerService.component$.next({page:"crowd",exist:!0}),this.crowdSVC.crowdTotal$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=t.data;e[0]&&(this.total=e[0].total_count,this.realName=e[0].realname_count,this.crowd_total.updateTime=u(e[0].src_time).format("YYYY/MM/DD HH:mm"))})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"crowd",exist:!1})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(T))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd-total-people"]],decls:6,vars:4,consts:[[3,"CardSetting"],[1,"full"],[1,"division"],[1,"data-area"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Wb(1,"div",1),f.Wb(2,"div",2),f.Wb(3,"div",3),f.Kc(4),f.ic(5,"number"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.crowd_total),f.Eb(4),f.Lc(f.jc(5,2,e.total)))},directives:[C.a],pipes:[i.f],styles:['.full[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap}.full[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.5rem;width:35%;min-width:65px;max-width:100px;text-align:center;line-height:1.3;white-space:nowrap}.full[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:18px;border-radius:20px;position:relative;color:#fff}.full[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, .full[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;width:70%;height:3px}.full[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child:before{left:-70%}.full[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{right:-70%}.full[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.full[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;font-size:64px;font-weight:600}@media (max-width:1280px){.full[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]{font-size:50px}}@media (max-width:800px){.full[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]{font-size:64px}}.bg-green[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .bg-green[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, .bg-green[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{background-color:#38b7a9}.bg-blue[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .bg-blue[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, .bg-blue[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{background-color:#548ac1}']}),t})();var j=a("y/or"),z=a("B8QL");function N(t,e){1&t&&f.Rb(0,"mat-header-cell",15)}function Q(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",16),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.station_name," ")}}const Y=function(t){return{background:t}};function H(t,e){if(1&t&&(f.Wb(0,"mat-cell",17),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.nc("ngStyle",f.qc(2,Y,t.enter>=2265||t.exit>=2265?"#AC2362":"#807C78")),f.Eb(1),f.Mc(" ",t.station_name," ")}}function F(t,e){1&t&&(f.Wb(0,"mat-header-cell",15),f.Kc(1,"\u5373\u6642\u9032\u7ad9\u4eba\u6b21"),f.Vb())}function U(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",16),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.enter," ")}}const B=function(t){return{color:t}};function G(t,e){if(1&t&&(f.Wb(0,"mat-cell",17),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.nc("ngStyle",f.qc(2,B,t.enter>=2265?"#932760":"")),f.Eb(1),f.Mc(" ",t.enter," ")}}function J(t,e){1&t&&(f.Wb(0,"mat-header-cell",15),f.Kc(1,"\u5373\u6642\u51fa\u7ad9\u4eba\u6b21"),f.Vb())}function q(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",16),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.exit," ")}}function X(t,e){if(1&t&&(f.Wb(0,"mat-cell",17),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.nc("ngStyle",f.qc(2,B,t.exit>=2265?"#932760":"")),f.Eb(1),f.Mc(" ",t.exit," ")}}function Z(t,e){1&t&&(f.Wb(0,"mat-header-cell",15),f.Kc(1,"\u7d2f\u8a08\u9032\u7ad9\u4eba\u6b21"),f.Vb())}function tt(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",16),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.enter_count," ")}}function et(t,e){if(1&t&&(f.Wb(0,"mat-cell",18),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.Eb(1),f.Mc(" ",t.enter_count," ")}}function at(t,e){1&t&&(f.Wb(0,"mat-header-cell",15),f.Kc(1,"\u7d2f\u8a08\u51fa\u7ad9\u4eba\u6b21"),f.Vb())}function it(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",16),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.exit_count," ")}}function nt(t,e){if(1&t&&(f.Wb(0,"mat-cell",18),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.Eb(1),f.Mc(" ",t.exit_count," ")}}function ot(t,e){1&t&&f.Rb(0,"mat-header-row")}function rt(t,e){1&t&&f.Rb(0,"mat-row")}function ct(t,e){1&t&&f.Rb(0,"mat-footer-row")}function st(t,e){1&t&&f.Rb(0,"mat-header-cell",16)}function lt(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",17),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.station_name," ")}}function dt(t,e){if(1&t&&(f.Wb(0,"mat-cell",18),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.nc("ngStyle",f.qc(2,Y,t.enter>=2265||t.exit>=2265?"#AC2362":"#807C78")),f.Eb(1),f.Mc(" ",t.station_name," ")}}function ht(t,e){1&t&&(f.Wb(0,"mat-header-cell",16),f.Kc(1,"\u5373\u6642\u9032\u7ad9\u4eba\u6b21"),f.Vb())}function pt(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",17),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.enter," ")}}function mt(t,e){if(1&t&&(f.Wb(0,"mat-cell",18),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.nc("ngStyle",f.qc(2,B,t.enter>=2265?"#932760":"#000")),f.Eb(1),f.Mc(" ",t.enter," ")}}function gt(t,e){1&t&&(f.Wb(0,"mat-header-cell",16),f.Kc(1,"\u5373\u6642\u51fa\u7ad9\u4eba\u6b21"),f.Vb())}function bt(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",17),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.exit," ")}}function ut(t,e){if(1&t&&(f.Wb(0,"mat-cell",18),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.nc("ngStyle",f.qc(2,B,t.exit>=2265?"#932760":"#000")),f.Eb(1),f.Mc(" ",t.exit," ")}}function ft(t,e){1&t&&(f.Wb(0,"mat-header-cell",16),f.Kc(1,"\u7d2f\u8a08\u9032\u7ad9\u4eba\u6b21"),f.Vb())}function xt(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",17),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.enter_count," ")}}function yt(t,e){if(1&t&&(f.Wb(0,"mat-cell",19),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.Eb(1),f.Mc(" ",t.enter_count," ")}}function wt(t,e){1&t&&(f.Wb(0,"mat-header-cell",16),f.Kc(1,"\u7d2f\u8a08\u51fa\u7ad9\u4eba\u6b21"),f.Vb())}function Ct(t,e){if(1&t&&(f.Wb(0,"mat-footer-cell",17),f.Kc(1),f.Vb()),2&t){const t=f.hc();f.Eb(1),f.Mc("",t.total.exit_count," ")}}function vt(t,e){if(1&t&&(f.Wb(0,"mat-cell",19),f.Kc(1),f.Vb()),2&t){const t=e.$implicit;f.Eb(1),f.Mc(" ",t.exit_count," ")}}function _t(t,e){1&t&&f.Rb(0,"mat-header-row")}function Ot(t,e){1&t&&f.Rb(0,"mat-row")}function St(t,e){1&t&&f.Rb(0,"mat-footer-row")}const kt=".text-scroll[_ngcontent-%COMP%]{height:100%;overflow:auto}.text-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}table[_ngcontent-%COMP%]{width:100%;background-color:transparent}table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:15px}table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.4);font-weight:bolder;margin-bottom:4px}table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:first-child{border-top-left-radius:30px;border-bottom-left-radius:30px;margin-right:4px;color:#fff}table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:last-child{border-top-right-radius:30px;border-bottom-right-radius:30px}table[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]{display:flex;background-color:#3fc3c9;font-weight:bolder;font-size:15px;justify-content:center;color:#fff}table[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:first-child{margin-right:4px;color:#fff;border-top-left-radius:30px;border-bottom-left-radius:30px}table[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:last-child{border-top-right-radius:30px;border-bottom-right-radius:30px}.large-table[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%], .large-table[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%], .large-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#000}.large-table[_ngcontent-%COMP%]     thead{position:-webkit-sticky;position:sticky;top:0;background-color:#fff}.large-table[_ngcontent-%COMP%]     tbody{margin-top:20px}.mat-footer-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%],   .mat-header-row{min-height:25.3px}";let Mt=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.crowdSVC=a,this.recordFilterData=[],this.displayedColumns=["station_name","enter","exit","enter_count","exit_count"],this.defultMrt=["\u4e2d\u592e\u516c\u5712\u7ad9","\u9e7d\u57d5\u57d4\u7ad9","\u897f\u5b50\u7063\u7ad9","\u7f8e\u9e97\u5cf6\u7ad9","\u524d\u93ae\u9ad8\u4e2d\u7ad9","\u51f1\u65cb\u7ad9"],this.dataSource=[],this.objData={},this.allData=[],this.mrtTree=[],this.total={station_name:"\u7e3d\u548c",enter:0,exit:0,enter_count:0,exit_count:0},this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.place_mrt={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/mrt.png",title:"\u6377\u904b\u7ad9\u9032\u51fa\u4eba\u6578",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a15\u5206\u9418\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u6377\u904b\u5373\u6642\u5206\u523b\u904b\u91cf\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u9032\u6216\u51fa\u7ad9\u5927\u65bcX\u4eba/\u6bcf15\u5206\u9418"}}ngOnInit(){this.centerService.component$.next({page:"crowd",exist:!0}),this.crowdSVC.crowdMrt$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=t.data;if(e.length>0){this.allData=e,this.dataSource=e,this.objData=this.getObj(e);const a=this.getDefult(e);this.mrtTree=this.getFilterTree(e),this.now=u(t.max_scr_time).format("YYYY/MM/DD HH:mm"),0===this.recordFilterData.length&&(this.recordFilterData=a),this.changeMrt(this.recordFilterData)}})}getDefult(t){const e=[];let a=0,i=0,n=0,o=0;return t.forEach(t=>{this.defultMrt.forEach(r=>{t.station_name===r&&(e.push(t),a+=t.enter,i+=t.exit,n+=t.enter_count,o+=t.exit_count)})}),this.total={station_name:"\u7e3d\u548c",enter:a,exit:i,enter_count:n,exit_count:o},e}getObj(t){const e={};return t.forEach(t=>{e[t.station_name]=t}),e}getFilterTree(t){const e={text:"\u6377\u904b\u7ad9",collapsed:!0,value:"",children:[]};return t.forEach(t=>{e.children.push({text:t.station_name,value:t.station_name})}),[e]}getFiterData(t){const e=[];return t.forEach(t=>{e.push(this.objData[t])}),e}changeMrt(t){this.place_mrt={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/mrt.png",title:"\u6377\u904b\u7ad9\u9032\u51fa\u4eba\u6578",updateTime:this.now,openFilter:()=>{this.dialog.open(Dt,{width:"80vw",height:"80vh",data:this.mrtTree}).afterClosed().subscribe(t=>{t&&(this.recordFilterData=this.getFiterData(t),this.changeMrt(this.recordFilterData))})},openLarge:()=>{this.dialog.open(Pt,{width:"80vw",height:"80vh",data:[t,this.total]})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8b66\u793a\u9580\u6abb\uff1a\u9032\u6216\u51fa\u7ad9\u5927\u65bcX\u4eba/\u6bcf15\u5206\u9418\n\n2. \u8cc7\u6599\u983b\u7387\uff1a15\u5206\u9418\n\n3. \u8cc7\u6599\u4f86\u6e90\uff1a\u6377\u904b\u5373\u6642\u5206\u523b\u904b\u91cf"},this.dataSource=t,this.total=t.reduce((t,e)=>({station_name:"\u7e3d\u548c",enter:t.enter+e.enter,exit:t.exit+e.exit,enter_count:t.enter_count+e.enter_count,exit_count:t.exit_count+e.exit_count}),{station_name:"\u7e3d\u548c",enter:0,exit:0,enter_count:0,exit_count:0})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"crowd",exist:!1})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(T))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd-mrt"]],decls:26,vars:7,consts:[[3,"CardSetting"],[1,"text-scroll"],["mat-table","",3,"dataSource"],["matColumnDef","station_name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","enter"],["matColumnDef","exit"],["matColumnDef","enter_count"],["mat-cell","",4,"matCellDef"],["matColumnDef","exit_count"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[4,"matFooterRowDef","matFooterRowDefSticky"],["mat-header-cell",""],["mat-footer-cell",""],["mat-cell","",3,"ngStyle"],["mat-cell",""]],template:function(t,e){1&t&&(f.Wb(0,"app-card2x1",0),f.Wb(1,"div",1),f.Wb(2,"table",2),f.Ub(3,3),f.Ic(4,N,1,0,"mat-header-cell",4),f.Ic(5,Q,2,1,"mat-footer-cell",5),f.Ic(6,H,2,4,"mat-cell",6),f.Tb(),f.Ub(7,7),f.Ic(8,F,2,0,"mat-header-cell",4),f.Ic(9,U,2,1,"mat-footer-cell",5),f.Ic(10,G,2,4,"mat-cell",6),f.Tb(),f.Ub(11,8),f.Ic(12,J,2,0,"mat-header-cell",4),f.Ic(13,q,2,1,"mat-footer-cell",5),f.Ic(14,X,2,4,"mat-cell",6),f.Tb(),f.Ub(15,9),f.Ic(16,Z,2,0,"mat-header-cell",4),f.Ic(17,tt,2,1,"mat-footer-cell",5),f.Ic(18,et,2,1,"mat-cell",10),f.Tb(),f.Ub(19,11),f.Ic(20,at,2,0,"mat-header-cell",4),f.Ic(21,it,2,1,"mat-footer-cell",5),f.Ic(22,nt,2,1,"mat-cell",10),f.Tb(),f.Ic(23,ot,1,0,"mat-header-row",12),f.Ic(24,rt,1,0,"mat-row",13),f.Ic(25,ct,1,0,"mat-footer-row",14),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.place_mrt),f.Eb(2),f.nc("dataSource",e.dataSource),f.Eb(21),f.nc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),f.Eb(1),f.nc("matRowDefColumns",e.displayedColumns),f.Eb(1),f.nc("matFooterRowDef",e.displayedColumns)("matFooterRowDefSticky",!0))},directives:[j.a,h.n,h.c,h.i,h.e,h.b,h.k,h.m,h.g,h.h,h.d,h.a,i.o,h.j,h.l,h.f],styles:[kt]}),t})(),Pt=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.crowdSVC=e,this.data=a,this.dataSource=[],this.total={station_name:"\u7e3d\u548c",enter:0,exit:0,enter_count:0,exit_count:0},this.displayedColumns=["station_name","enter","exit","enter_count","exit_count"],this.total=a[1],this.dataSource=a[0]}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(T),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["crowd-mrt-large-dialog"]],decls:31,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["mat-table","",1,"large-table",3,"dataSource"],["matColumnDef","station_name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","enter"],["matColumnDef","exit"],["matColumnDef","enter_count"],["mat-cell","",4,"matCellDef"],["matColumnDef","exit_count"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[4,"matFooterRowDef","matFooterRowDefSticky"],["mat-header-cell",""],["mat-footer-cell",""],["mat-cell","",3,"ngStyle"],["mat-cell",""]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u6377\u904b\u7ad9\u9032\u51fa\u4eba\u6578"),f.Vb(),f.Wb(3,"button",2),f.Wb(4,"mat-icon"),f.Kc(5,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(6,"mat-dialog-content"),f.Wb(7,"table",3),f.Ub(8,4),f.Ic(9,st,1,0,"mat-header-cell",5),f.Ic(10,lt,2,1,"mat-footer-cell",6),f.Ic(11,dt,2,4,"mat-cell",7),f.Tb(),f.Ub(12,8),f.Ic(13,ht,2,0,"mat-header-cell",5),f.Ic(14,pt,2,1,"mat-footer-cell",6),f.Ic(15,mt,2,4,"mat-cell",7),f.Tb(),f.Ub(16,9),f.Ic(17,gt,2,0,"mat-header-cell",5),f.Ic(18,bt,2,1,"mat-footer-cell",6),f.Ic(19,ut,2,4,"mat-cell",7),f.Tb(),f.Ub(20,10),f.Ic(21,ft,2,0,"mat-header-cell",5),f.Ic(22,xt,2,1,"mat-footer-cell",6),f.Ic(23,yt,2,1,"mat-cell",11),f.Tb(),f.Ub(24,12),f.Ic(25,wt,2,0,"mat-header-cell",5),f.Ic(26,Ct,2,1,"mat-footer-cell",6),f.Ic(27,vt,2,1,"mat-cell",11),f.Tb(),f.Ic(28,_t,1,0,"mat-header-row",13),f.Ic(29,Ot,1,0,"mat-row",14),f.Ic(30,St,1,0,"mat-footer-row",15),f.Vb(),f.Vb()),2&t&&(f.Eb(7),f.nc("dataSource",e.dataSource),f.Eb(21),f.nc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),f.Eb(1),f.nc("matRowDefColumns",e.displayedColumns),f.Eb(1),f.nc("matFooterRowDef",e.displayedColumns)("matFooterRowDefSticky",!0))},directives:[p.h,d.a,p.d,r.a,p.e,h.n,h.c,h.i,h.e,h.b,h.k,h.m,h.g,h.h,h.d,h.a,i.o,h.j,h.l,h.f],styles:[kt]}),t})(),Dt=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.crowdSVC=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(T),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["crowd-mrt-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[kt]}),t})();const Vt=function(t){return{height:t}};let $t=(()=>{class t{constructor(t,e,a){this.dialog=t,this.crowdSVC=e,this.centerService=a,this.destroyed$=new b.a(1),this.staticData=["\u5357\u6295\u7e23","\u5609\u7fa9\u5e02","\u5609\u7fa9\u7e23","\u57fa\u9686\u5e02","\u5b9c\u862d\u7e23","\u5c4f\u6771\u7e23","\u5f70\u5316\u7e23","\u65b0\u5317\u5e02","\u65b0\u7af9\u5e02","\u65b0\u7af9\u7e23","\u6843\u5712\u7e23","\u6f8e\u6e56\u7e23","\u81fa\u4e2d\u5e02","\u81fa\u5317\u5e02","\u81fa\u5357\u5e02","\u81fa\u6771\u7e23","\u82b1\u84ee\u7e23","\u82d7\u6817\u7e23","\u9023\u6c5f\u7e23","\u91d1\u9580\u7e23","\u96f2\u6797\u7e23","\u9ad8\u96c4\u5e02"],this.theme="dark-theme",this.max=0,this.cityRankOption={},this.now=u().format("YYYY/MM/DD HH:mm"),this.crowd_city_rank={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-people.png",title:"\u5404\u7e23\u5e02\u4f86\u6e90\u4eba\u6f6e\u6392\u540d",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a10\u5206\u9418\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u4e2d\u83ef\u96fb\u4fe1CVP\u8cc7\u6599(G3\u63d0\u4f9b\u6d3b\u52d5\u7bc4\u570d\u5167\u5373\u6642\u7e3d\u4eba\u6f6e\u53ca\u8f2a\u5ed3\u7d71\u8a08\u8207\u79fb\u5165\u65b9\u5411\u6578\u64da-\u7121\u6392\u5c45\u6c11)\n\n3. \u5176\u4ed6\u8aaa\u660e\uff1a\n\n  (1)\u6eff\u5834\u7387=\u5373\u6642\u5834\u5167\u4eba\u6578/\u5834\u5730\u53ef\u5bb9\u7d0d\u4eba\u6578\n\n  (2)\u5834\u5730\u53ef\u5bb9\u7d0d\u4eba\u6578\u5171140,000\u4eba"}}ngOnInit(){this.centerService.component$.next({page:"crowd",exist:!0}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t}),this.crowdSVC.crowdCityRank$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=t.data[0];if(Object.keys(e).length>0){const t={},a=[];this.staticData.forEach(i=>{t[i]||(t[i]={}),t[i].rate=Math.round(1e3*e[i]/e.total)/10,t[i].count=e[i],a.push(e[i])}),this.max=Math.max(...a),this.changeCrowdCityRank(t),this.crowd_city_rank.updateTime=u(e.src_time).format("YYYY/MM/DD HH:mm")}})}changeCrowdCityRank(t){const e=Object.keys(t),a=[];Object.values(t).forEach(t=>{a.push({value:t.count,itemStyle:{color:"#807C78"}})}),this.crowd_city_rank.openLarge=()=>{this.dialog.open(Wt,{width:"80vw",height:"80vh",data:{grid:{top:"4%",left:"2%",right:"10%",bottom:"7%"},xAxis:{type:"value",min:0,max:this.max,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:e,inverse:!0,animationDuration:300,animationDurationUpdate:300},title:{text:"\u767e\u5206\u6bd4 \u4eba\u6578",right:48,top:20,textStyle:{fontWeight:"normal",fontSize:16,fontFamily:"oswald"}},series:[{realtimeSort:!0,type:"bar",data:Array.from([...Array(e.length).fill(this.max)]),barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(e){const a=t[e.name].count>0?t[e.name].count.toLocaleString():" - ";return(t[e.name].rate<10?"  "+t[e.name].rate:t[e.name].rate)+"%   "+a},textStyle:{fontSize:16,color:"#000000"}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-20],valueAnimation:!0,formatter:function(t){const e=t.name;return e.length>13?e.substring(0,13)+"...":e},textStyle:{fontSize:16,color:"#000000"}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"}})},this.cityRankOption={grid:{top:"2%",left:"5%",right:"37%",bottom:"5%"},xAxis:{type:"value",min:0,max:this.max,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:e,max:9,inverse:!0,animationDuration:300,animationDurationUpdate:300},title:{text:"\u767e\u5206\u6bd4 \u4eba\u6578",right:10,top:-5,textStyle:{fontWeight:"normal",fontSize:14,fontFamily:"oswald"}},series:[{realtimeSort:!0,type:"bar",data:Array.from([...Array(e.length).fill(this.max)]),barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(e){const a=t[e.name].count>0?t[e.name].count.toLocaleString():" - ";return(t[e.name].rate<10?"  "+t[e.name].rate:t[e.name].rate)+"%   "+a},textStyle:{fontSize:12}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-20],valueAnimation:!0,formatter:function(t){const e=t.name;return e.length>13?e.substring(0,13)+"...":e},textStyle:{fontSize:14}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"crowd",exist:!1})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(T),f.Qb(x.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd-city-rank"]],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"h-100",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.crowd_city_rank),f.Eb(1),f.nc("theme",e.theme)("options",e.cityRankOption))},directives:[C.a,o.a],styles:[".h-100[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})(),Wt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.update=e,this.yHeight=0,this.cityRankOption={},this.title="\u5404\u7e23\u5e02\u4f86\u6e90\u4eba\u6f6e\u6392\u540d",this.cityRankOption=e,this.yHeight=1320}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download=this.title,t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["crowd-city-rank-large-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",1,"w-100",3,"options","ngStyle","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(2),f.Lc(e.title),f.Eb(8),f.nc("options",e.cityRankOption)("ngStyle",f.qc(3,Vt,e.yHeight+"px")))},directives:[p.h,d.a,r.a,p.d,p.e,o.a,i.o],styles:[".h-100[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})(),It=(()=>{class t{constructor(t,e,a){this.dialog=t,this.crowdSVC=e,this.centerService=a,this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.place_people={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/icon-people.png",title:"\u6d3b\u52d5\u5834\u5730\u7d2f\u8a08\u5230\u8a2a\u4eba\u6b21",updateTime:this.now,openLarge:()=>{this.dialog.open(Et,{width:"80vw",height:"80vh",data:this.place_people_update})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a1\u5c0f\u6642\uff0c\u53d6\u5f97\u505c\u7559\u6642\u959330\u5206\u9418\u4ee5\u4e0a\u7684\u4eba\u6f6e\u8cc7\u6599\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u4e2d\u83ef\u96fb\u4fe1CVP\u8cc7\u6599(E2\u63d0\u4f9b\u6307\u5b9a\u65e5\u671f\u6d3b\u52d5\u7bc4\u5167\u904a\u5ba2\u4eba\u6f6e\u8f2a\u5ed3\u7d71\u8a08\u6578\u64da-\u6392\u5c45\u6c11)"},this.place_people_chartOption={tooltip:{trigger:"axis",formatter:t=>t[0]&&t[1]?`\u5c0f\u6642\uff1a${"0"===t[0].axisValue?23:t[0].axisValue-1}-${t[0].axisValue}<br>\n          ${t[0].marker}${t[0].seriesName}\uff1a${t[0].value?t[0].value:0}\u4eba<br>\n          ${t[1].marker}${t[1].seriesName}\uff1a${t[1].value}\u4eba`:t[0]?`\u5c0f\u6642\uff1a${"0"===t[0].axisValue?23:t[0].axisValue-1}-${t[0].axisValue}<br>\n          ${t[0].marker}${t[0].seriesName}\uff1a${t[0].value?t[0].value:0}\u4eba`:t[1]?`\u5c0f\u6642\uff1a${"0"===t[0].axisValue?23:t[0].axisValue-1}-${t[0].axisValue}<br>\n          ${t[1].marker}${t[1].seriesName}\uff1a${t[1].value}\u4eba`:""},legend:{data:["\u7d2f\u8a08\u4eba\u6578","\u5206\u6642\u4eba\u6578"],textStyle:{}},grid:{top:"20%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,axisTick:{show:!1},axisLabel:{textStyle:{}},data:[]},yAxis:[{type:"value",name:"\u7d2f\u8a08\u4eba\u6578",nameTextStyle:{},splitLine:{lineStyle:{type:"dashed"}},axisLabel:{textStyle:{}},axisTick:{show:!1}},{type:"value",name:"\u5206\u6642\u4eba\u6578",nameTextStyle:{},axisLabel:{textStyle:{}},splitLine:{lineStyle:{type:"dashed"}},axisTick:{show:!1}}],series:[{name:"\u7d2f\u8a08\u4eba\u6578",type:"line",data:[],itemStyle:{color:"#83BA45"},lineStyle:{width:4}},{type:"bar",name:"\u5206\u6642\u4eba\u6578",yAxisIndex:1,itemStyle:{normal:{color:"#3fc3c9",barBorderRadius:[10,10,0,0]}},data:[]}]},this.place_people_update={},this.theme="dark-theme"}ngOnInit(){this.centerService.component$.next({page:"crowd",exist:!0}),this.crowdSVC.crowdPlace$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=t.data;e.length>0&&this.updateDate(e)}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}updateDate(t){const e=[],a=[];t[0].count_24h.forEach(t=>{e.push(-1!==t?t:"")}),t[0].total_count_24h.forEach(t=>{a.push(-1!==t?t:"")}),this.place_people.updateTime=u(t[0].src_time).format("YYYY/MM/DD HH:mm"),this.place_people_update={xAxis:{data:Array.from([...Array(24).keys()])},series:[{name:"\u5206\u6642\u4eba\u6578",data:e},{name:"\u7d2f\u8a08\u4eba\u6578",data:a}]}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"crowd",exist:!1})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(T),f.Qb(x.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd-place-people"]],decls:2,vars:4,consts:[[3,"CardSetting"],["echarts","",1,"full",3,"theme","options","merge"]],template:function(t,e){1&t&&(f.Wb(0,"app-card2x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.place_people),f.Eb(1),f.nc("theme",e.theme)("options",e.place_people_chartOption)("merge",e.place_people_update))},directives:[j.a,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),Et=(()=>{class t{constructor(t,e){this.dialogRef=t,this.update=e,this.placePeople={tooltip:{trigger:"axis",formatter:t=>t[0]&&t[1]?`\u5c0f\u6642\uff1a${"0"===t[0].axisValue?23:t[0].axisValue-1}-${t[0].axisValue}<br>\n          ${t[0].marker}${t[0].seriesName}\uff1a${t[0].value?t[0].value:0}\u4eba<br>\n          ${t[1].marker}${t[1].seriesName}\uff1a${t[1].value}\u4eba`:t[0]?`\u5c0f\u6642\uff1a${"0"===t[0].axisValue?23:t[0].axisValue-1}-${t[0].axisValue}<br>\n          ${t[0].marker}${t[0].seriesName}\uff1a${t[0].value?t[0].value:0}\u4eba`:t[1]?`\u5c0f\u6642\uff1a${"0"===t[0].axisValue?23:t[0].axisValue-1}-${t[0].axisValue}<br>\n          ${t[1].marker}${t[1].seriesName}\uff1a${t[1].value}\u4eba`:""},legend:{data:["\u7d2f\u8a08\u4eba\u6578","\u5206\u6642\u4eba\u6578"],textStyle:{fontSize:"16"}},grid:{top:"10%",left:"4%",right:"4%",bottom:"8%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,axisTick:{show:!1},axisLabel:{textStyle:{fontSize:"16"}},data:[6,7,8,9,10,11,12,13]},yAxis:[{type:"value",name:"\u7d2f\u8a08\u4eba\u6578",nameTextStyle:{fontSize:"16"},splitLine:{lineStyle:{type:"dashed"}},axisLabel:{textStyle:{fontSize:"16"}},axisTick:{show:!1}},{type:"value",name:"\u5206\u6642\u4eba\u6578",nameTextStyle:{fontSize:"16"},splitLine:{lineStyle:{type:"dashed"}},axisLabel:{textStyle:{fontSize:"16"}},axisTick:{show:!1}}],series:[{name:"\u7d2f\u8a08\u4eba\u6578",type:"line",data:[15,127,268,422,612,842,1091,1331],itemStyle:{color:"#83BA45"},lineStyle:{width:7}},{type:"bar",name:"\u5206\u6642\u4eba\u6578",yAxisIndex:1,itemStyle:{normal:{color:"#3fc3c9",barBorderRadius:[10,10,0,0]}},data:[15,112,141,154,190,230,249,240]}]},this.placePeopleUpdate={},this.placePeopleUpdate=e}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u6d3b\u52d5\u5834\u5730\u7d2f\u8a08\u5230\u8a2a\u4eba\u6b21",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["crowd-place-people-large-dialog"]],decls:11,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",1,"full",3,"options","merge","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u6d3b\u52d5\u5834\u5730\u7d2f\u8a08\u5230\u8a2a\u4eba\u6b21"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.placePeople)("merge",e.placePeopleUpdate))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),Lt=(()=>{class t{constructor(t,e,a){this.dialog=t,this.crowdSVC=e,this.centerService=a,this.destroyed$=new b.a(1),this.staticData={"\u4e2d\u5c71\u5927\u5b78":15e3,"\u54c8\u746a\u661f\u9435\u9053\u5712\u5340":4e4,"\u661f\u5149\u516c\u5712":11763,"\u65d7\u6d25\u6d77\u6c34\u6d74\u5834":27943,"\u58fd\u5c71\u60c5\u4eba\u89c0\u666f\u53f0":2391,"\u65d7\u6d25\u6e21\u8f2a\u7ad9\u9031\u908a":4496,"\u897f\u5b50\u7063\u904a\u5ba2\u4e2d\u5fc3":3270,"\u897f\u5b50\u7063\u89c0\u666f\u5e73\u53f0":2330,"\u65d7\u6d25\u99ac\u96c5\u5404\u81ea\u884c\u8eca\u9053":4750},this.theme="dark-theme",this.max=0,this.rankOption={},this.now=u().format("YYYY/MM/DD HH:mm"),this.crowd_rank={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-people.png",title:"\u5340\u57df\u4eba\u6578\u6392\u540d",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a10\u5206\u9418\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u4e2d\u83ef\u96fb\u4fe1CVP\u8cc7\u6599(D7\u63d0\u4f9b\u6d3b\u52d5\u7bc4\u570d50x50\u5404\u7db2\u683c\u5373\u6642\u7e3d\u4eba\u6578\u8cc7\u6599-\u7121\u6392\u5c45\u6c11)\n\n3. \u6eff\u5834\u7387\uff1a\u5373\u6642\u5834\u5167\u4eba\u6578/\u5834\u5730\u53ef\u5bb9\u7d0d\u4eba\u6578"}}ngOnInit(){this.centerService.component$.next({page:"crowd",exist:!0}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t}),this.crowdSVC.crowdRank$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{const e=t.data;if(e.length>0){const t={},a=[];e.forEach(e=>{"\u570b\u6176\u7130\u706b\u7bc4\u570d"!==e.name&&(t[e.name]||(t[e.name]=e),t[e.name].rate=Math.round(100*e.count/this.staticData[e.name]),a.push(e.count))}),this.max=Math.max(...a),this.changeCrowdRank(t),this.crowd_rank.updateTime=u(e[0].src_time).format("YYYY/MM/DD HH:mm")}})}changeCrowdRank(t){const e=Object.keys(t),a=[];Object.values(t).forEach(t=>{let e="",i=t?t.rate:-999;i>=80?e="#AD2362":i<80&&i>=60?e="#E88C26":i<60&&(e="#83BA45"),a.push({value:t.count,itemStyle:{color:e}})}),this.rankOption={grid:{top:"2%",left:"5%",right:"33%",bottom:"5%"},xAxis:{type:"value",min:0,max:this.max,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:e,max:9,inverse:!0,animationDuration:300,animationDurationUpdate:300},title:{text:"\u6eff\u5834\u7387 \u4eba\u6578",right:10,top:-5,textStyle:{fontWeight:"normal",fontSize:14,fontFamily:"oswald"}},series:[{realtimeSort:!0,type:"bar",data:Array.from([...Array(e.length).fill(this.max)]),barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(e){const a=t[e.name].count>0?t[e.name].count.toLocaleString():" - ";return(t[e.name].rate<10?"  "+t[e.name].rate:t[e.name].rate)+"%   "+a},textStyle:{fontSize:12}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-20],valueAnimation:!0,formatter:function(t){const e=t.name;return e.length>13?e.substring(0,13)+"...":e},textStyle:{fontSize:14}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"crowd",exist:!1})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(T),f.Qb(x.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd-rank"]],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"h-100",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.crowd_rank),f.Eb(1),f.nc("theme",e.theme)("options",e.rankOption))},directives:[C.a,o.a],styles:[".h-100[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})();var Rt=a("VmUF"),Tt=a("rkXd");let At=(()=>{class t{constructor(t,e){this.centerSVC=t,this.crowdSVC=e}ngOnInit(){setTimeout(()=>{this.centerSVC.map$.next({map:"layouts",order:"crowd-map"})},100)}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(x.a),f.Qb(T))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-crowd"]],decls:9,vars:0,consts:[[1,"container"],[1,"item1"],[1,"item2"],[1,"item3"],[1,"item4"],[1,"item5"],[1,"item6"],[1,"map-explan-target"],[1,"bg-map"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Rb(1,"app-crowd-now-people",1),f.Rb(2,"app-crowd-total-people",2),f.Rb(3,"app-crowd-mrt",3),f.Rb(4,"app-crowd-city-rank",4),f.Rb(5,"app-crowd-place-people",5),f.Rb(6,"app-crowd-rank",6),f.Rb(7,"app-crowd-map-explan",7),f.Vb(),f.Rb(8,"app-crowd-map",8))},directives:[A,K,Mt,$t,It,Lt,Rt.a,Tt.a],styles:['.container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item4 . . . . item6" "item4 . . . explan item6" "item3 item3 item1 item2 item5 item5"}.item1[_ngcontent-%COMP%]{grid-area:item1;z-index:1}.item2[_ngcontent-%COMP%]{grid-area:item2;z-index:1}.item3[_ngcontent-%COMP%]{grid-area:item3;z-index:1}.item4[_ngcontent-%COMP%]{grid-area:item4;z-index:1}.item5[_ngcontent-%COMP%]{grid-area:item5;z-index:1}.item6[_ngcontent-%COMP%]{grid-area:item6;z-index:1}.map-layout-control[_ngcontent-%COMP%]{grid-area:switch;width:52px;z-index:1;position:relative;bottom:0;left:0;margin-top:auto}.map-explan-target[_ngcontent-%COMP%]{grid-area:explan;z-index:1;margin-top:auto;margin-left:auto;margin-bottom:70px}@media (max-width:1024px){.container[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,minmax(250px,32%));grid-template-areas:"item4 item4 . . item6 item6" "item4 item4 . . item6 item6" "item1 item1 . . item2 item2" "item3 item3 item3 item5 item5 item5"}.map-explan-target[_ngcontent-%COMP%]{display:none}}@media (max-width:800px){.container[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;padding-top:16px;gap:0 0;grid-template-columns:repeat(1,minmax(100px,100%));grid-template-rows:repeat(6,max(400px));grid-template-areas:"item1" "item2" "item3" "item4" "item5" "item6"}.item1[_ngcontent-%COMP%], .item2[_ngcontent-%COMP%], .item3[_ngcontent-%COMP%], .item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%]{max-width:100%}}']}),t})(),Kt=(()=>{class t{constructor(t,e){this.dialog=t,this.centerSVC=e,this.parkStatic={},this.parkSingle=["\u6587\u5316\u4e2d\u5fc3\u505c\u8eca\u5834","\u524d\u91d1\u7acb\u9ad4\u505c\u8eca\u5834","\u9ad8\u9435\u5de6\u71df\u7ad9\u505c\u8eca\u5834","\u885b\u6b66\u71df\u570b\u5bb6\u85dd\u8853\u6587\u5316\u4e2d\u5fc3\u5730\u4e0b\u505c\u8eca\u5834","\u9ad8\u96c4\u570b\u969b\u6a5f\u5834\u505c\u8eca\u5834","\u8349\u8859\u9053\u5730\u4e0b\u505c\u8eca\u5834","\u5922\u6642\u4ee3\u8cfc\u7269\u4e2d\u5fc3\u9644\u5c6c\u505c\u8eca\u5834","\u9ad8\u96c4\u6377\u904bR24\u5357\u5ca1\u5c71\u7ad9\u7b2c\u4e00\u505c\u8eca\u5834","\u9ad8\u96c4\u6377\u904bR22\u9752\u57d4\u7ad9\u8f49\u4e58\u505c\u8eca\u5834","\u6377\u904b\u90fd\u6703\u516c\u5712\u7ad9\u8f49\u4e58\u505c\u8eca\u5834","\u7f8e\u8853\u9928\u7acb\u9ad4\u505c\u8eca\u5834","\u570b\u6cf0\u9752\u5e74\u505c\u8eca\u5834","\u6377\u904b\u5927\u5bee\u7ad9\u8f49\u4e58\u505c\u8eca\u5834","\u5927\u6771\u6587\u5316\u85dd\u8853\u4e2d\u5fc3\u5730\u4e0b\u505c\u8eca\u5834"],this.parkMoto=["P1\u6cb3\u897f\u8def","P2\u6cb3\u6771\u8def\u5317","P3\u6cb3\u6771\u8def\u5357","P4\u6c11\u751f\u4e00\u8def","P5\u5408\u767c\u7acb\u9ad4\u505c\u8eca\u5834","P6\u6d77\u908a\u8def","P7\u6797\u68ee\u56db\u8def","P8\u6210\u529f\u4e8c\u8def","P9\u65b0\u5149\u505c\u8eca\u5834","P10\u5922\u6642\u4ee3\u505c\u8eca\u5834"],this.include="parking-lot",this.start=!1,this.NewAPISwitch=!1,this.parkNowMap=[],this.parkRateMap$=new W.a,this.park24h={},this.parkTime$=new W.a,this.info24hTime="",this.parkRate$=new W.a,this.rateTime="",this.treeData=[],this.defaultTreeData=[],this.defaultMotoTreeData=[],this.dynamicTimer={parkRate:3e5,parkTime:36e5},this._0=this.centerSVC.pages$.pipe(Object(E.a)(10)).subscribe(t=>{t[this.include]&&t[this.include]>0?(this.NewAPISwitch=!0,this.initParkingLotData()):this.NewAPISwitch=!1}),this._1=Object(I.a)(this.dynamicTimer.parkRate).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.centerSVC.get("/api/parking/remaining").subscribe(t=>{this.rateTime=u(t.max_src_time).format("YYYY/MM/DD HH:mm"),this.parkNowMap=t.data,this.getRateData()})}),this._2=Object(I.a)(this.dynamicTimer.parkTime).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.centerSVC.get("/api/parking/info24h").subscribe(t=>{const e={};t.data.forEach(t=>{for(const a in t)e[a]=t[a]}),this.info24hTime=u(t.max_src_time).format("YYYY/MM/DD HH:mm"),this.park24h=e,this.getTimeData()})})}initParkingLotData(){const t=new Promise((t,e)=>{Object.keys(this.parkStatic).length>0?t():this.centerSVC.get("/api/parking/static").subscribe(e=>{const a={};e.data.forEach(t=>{0!==t.volume&&-1!==t.volume&&(a[t.name]=t)}),this.parkStatic=a,t()})}),e=new Promise((t,e)=>{this.centerSVC.get("/api/parking/remaining").subscribe(e=>{this.rateTime=u(e.max_src_time).format("YYYY/MM/DD HH:mm"),this.parkNowMap=e.data,t()})}),a=new Promise((t,e)=>{this.centerSVC.get("/api/parking/info24h").subscribe(e=>{const a={};e.data.forEach(t=>{for(const e in t)a[e]=t[e]}),this.info24hTime=u(e.max_src_time).format("YYYY/MM/DD HH:mm"),this.park24h=a,t()})});return Promise.all([t,e,a]).then(()=>{this.treeData=this.getTree(this.parkStatic),this.defaultTreeData=this.getTreeDefault(this.parkStatic,"car"),this.defaultMotoTreeData=this.getTreeDefault(this.parkStatic,"moto"),this.getTimeData(),this.getRateData()})}getRateData(){const t={};this.parkNowMap.forEach(e=>{if(void 0!==this.parkStatic[e.name]){const a=this.parkStatic[e.name];t[e.name]=a,t[e.name].leftspace=e.leftspace,t[e.name].time=e.src_time,t[e.name].rate=-1===e.leftspace?-999:Math.round(100*(1-e.leftspace/a.volume)),t[e.name].rate<0&&-999!==t[e.name].rate&&(t[e.name].rate=0)}}),this.parkRateMap$.next(t)}getTimeData(){const t={};Object.keys(this.parkStatic).forEach(e=>{this.park24h[e]&&(t[e]=this.park24h[e].map(t=>-1===t?"":Math.round(100*(1-t/this.parkStatic[e].volume))<0?0:Math.round(100*(1-t/this.parkStatic[e].volume))))}),this.parkTime$.next(t)}getTree(t){const e={"\u570b\u6176\u7130\u706b\u505c\u8eca\u5834":{text:"\u570b\u6176\u7130\u706b\u505c\u8eca\u5834",collapsed:!0,value:"",children:[]},"\u570b\u6176\u81e8\u6642\u6a5f\u8eca\u505c\u8eca\u5834":{text:"\u570b\u6176\u81e8\u6642\u6a5f\u8eca\u505c\u8eca\u5834",collapsed:!0,value:"",children:[]}};return this.parkSingle.forEach(t=>{e["\u570b\u6176\u7130\u706b\u505c\u8eca\u5834"].children.push({text:t,value:t})}),Object.values(t).forEach(t=>{e[t.areaname]||(e[t.areaname]={text:t.areaname,collapsed:!0,value:"",children:[]}),e[t.areaname].children.push({text:t.name,value:t.name})}),Object.values(e)}getTreeDefault(t,e){const a=[],i="car"===e?"\u570b\u6176\u7130\u706b\u505c\u8eca\u5834":"\u570b\u6176\u81e8\u6642\u6a5f\u8eca\u505c\u8eca\u5834",n=[{text:i,collapsed:!1,value:"",children:[]}];return"car"===e?(this.parkSingle.forEach(e=>{a.push(t[e])}),a.forEach(t=>{n[0].children.push({text:t.name,value:t.name})})):Object.values(t).forEach(t=>{t.areaname===i&&n[0].children.push({text:t.name,value:t.name})}),n}}return t.\u0275fac=function(e){return new(e||t)(f.ac(p.b),f.ac(x.a))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const jt=function(t){return{height:t}},zt=".h-100[_ngcontent-%COMP%]{height:100%}.h-100[_ngcontent-%COMP%], .w-100[_ngcontent-%COMP%]{width:100%}.scroll[_ngcontent-%COMP%]{overflow:scroll;height:calc(100% - 50px)}";let Nt=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.parkingLotSVC=a,this.destroyed$=new b.a(1),this.recordFilterData={},this.now=u().format("YYYY/MM/DD HH:mm"),this.allData={},this.parkingCard={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-parking.png",title:"\u505c\u8eca\u7387\u6392\u540d",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578  (-1\u8868\u793a\u7121\u8cc7\u6599)\n\n2. \u984f\u8272\u8aaa\u660e\uff1a\u505c\u8eca\u7387 <50%\u7da0\u8272\u300150% <= \u505c\u8eca\u7387 < 80%\u6a58\u8272\u3001\u505c\u8eca\u7387 >= 80%\u7d05\u8272\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u505c\u8eca\u7387\u905480%\n\n4. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n5. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"},this.parking_rate_chartOption={},this.theme="dark-theme"}ngOnInit(){this.centerService.component$.next({page:"parking-lot",exist:!0}),this.parkingLotSVC.parkRateMap$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{if(this.allData=t,Object.keys(t).length>0){if(this.now=this.parkingLotSVC.rateTime,localStorage.getItem("app-parking-lot-rate1x2"+this.carType)){const e=Object.keys(JSON.parse(localStorage.getItem("app-parking-lot-rate1x2"+this.carType)));this.recordFilterData=this.coverData(e,t)}else this.recordFilterData=this.getDefult(t,this.carType);this.changeParkingRate(this.recordFilterData)}}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}ngOnChanges(t){}coverData(t,e){const a={};return t.forEach(t=>{a[t]=e[t]}),a}getDefult(t,e){const a={};return"car"===e?this.parkingLotSVC.parkSingle.forEach(e=>{t[e]&&(a[e]=t[e])}):this.parkingLotSVC.parkMoto.forEach(e=>{t[e]&&(a[e]=t[e])}),a}changeParkingRate(t){const e=Object.keys(t),a=[];Object.values(t).forEach(t=>{let e="",i=t?t.rate:-999;i>=80?e="#AD2362":i<80&&i>=50?e="#E88C26":i<50&&(e="#83BA45"),a.push({value:i,itemStyle:{color:e}})}),this.parking_rate_chartOption={grid:{top:"2%",left:"4.5%",right:"15%",bottom:"5%"},xAxis:{type:"value",min:0,max:100,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:e,max:9,inverse:!0,animationDuration:300,animationDurationUpdate:300},series:[{realtimeSort:!0,type:"bar",data:Array.from([...Array(e.length).fill(100)]),barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(e){return(-999!==t[e.name].rate?t[e.name].rate:" - ")+"%"},textStyle:{fontSize:12}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-20],valueAnimation:!0,formatter:function(t){const e=t.name;return e.length>10?e.substring(0,10)+"...":e},textStyle:{fontSize:14}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"},this.parkingCard={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-parking.png",title:"car"===this.carType?"\u6c7d\u8eca\u505c\u8eca\u7387\u6392\u540d":"\u6a5f\u8eca\u505c\u8eca\u7387\u6392\u540d",updateTime:this.now,openFilter:()=>{this.dialog.open(Yt,{width:"80vw",height:"80vh",data:this.parkingLotSVC.treeData}).afterClosed().subscribe(t=>{t&&(this.recordFilterData=this.getFiterData(t),this.changeParkingRate(this.recordFilterData))})},openLarge:()=>{this.dialog.open(Qt,{width:"80vw",height:"80vh",data:{key:e,values:a,len:e.length,data:this.allData,carType:this.carType}})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578  (-1\u8868\u793a\u7121\u8cc7\u6599)\n\n2. \u984f\u8272\u8aaa\u660e\uff1a\u505c\u8eca\u7387 <50%\u7da0\u8272\u300150% <= \u505c\u8eca\u7387 < 80%\u6a58\u8272\u3001\u505c\u8eca\u7387 >= 80%\u7d05\u8272\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u505c\u8eca\u7387\u905480%\n\n4. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n5. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"}}getFiterData(t){const e={};return t.forEach(t=>{e[t]=this.allData[t]}),e}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"parking-lot",exist:!1}),localStorage.setItem("app-parking-lot-rate1x2"+this.carType,JSON.stringify(this.recordFilterData))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(Kt))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-parking-lot-rate1x2"]],inputs:{carType:"carType"},features:[f.Cb],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"h-100",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.parkingCard),f.Eb(1),f.nc("theme",e.theme)("options",e.parking_rate_chartOption))},directives:[C.a,o.a],styles:[zt]}),t})(),Qt=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.update=a,this.yHeight=0,this.parking_rate={},this.title="",this.title="car"===a.carType?"\u6c7d\u8eca\u505c\u8eca\u7387\u6392\u540d":"\u6a5f\u8eca\u505c\u8eca\u7387\u6392\u540d",this.parking_rate={grid:{top:"30",left:"5%",right:"5%",bottom:"5%"},xAxis:{type:"value",min:0,max:100,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:a.key,inverse:!0,animationDuration:300,animationDurationUpdate:300},series:[{realtimeSort:!0,type:"bar",data:Array.from([...Array(a.key.length).fill(100)]),barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(t){return(-999!==a.data[t.name].rate?a.data[t.name].rate:" - ")+"%"},textStyle:{fontSize:16}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"50%",data:a.values,label:{show:!0,position:"insideTopLeft",valueAnimation:!0,align:"left",offset:[-5,-22],formatter:"{b}",textStyle:{fontSize:16,color:"#000"}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"},this.yHeight=60*a.len}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download=this.title,t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-rate1x2-large-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",1,"w-100",3,"options","ngStyle","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(2),f.Lc(e.title),f.Eb(8),f.nc("options",e.parking_rate)("ngStyle",f.qc(3,jt,e.yHeight+"px")))},directives:[p.h,d.a,r.a,p.d,p.e,o.a,i.o],styles:[zt]}),t})(),Yt=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-rate1x2-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[zt]}),t})(),Ht=(()=>{class t{constructor(t,e,a){this.parkingLotSVC=t,this.centerService=e,this.dialog=a,this.destroyed$=new b.a(1),this.recordFilterData={},this.now=u().format("YYYY/MM/DD HH:mm"),this.hours=Array.from([...Array(24).keys()]),this.allData={},this.parking_time_chartOption={},this.parking_time_chartUpdate={},this.parkingCard={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-parking.png",title:"\u505c\u8eca\u5206\u6642\u505c\u8eca\u7387\u8da8\u52e2",updateTime:this.now,actionsOn:!1,latlng:[],help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578\n\n2. \u8cc7\u6599\u983b\u7387\uff1a1\u5c0f\u6642\n\n3. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"},this.theme="dark-theme"}ngOnInit(){this.centerService.component$.next({page:"parking-lot",exist:!0}),this.parkingLotSVC.parkTime$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{if(Object.keys(t).length>0){if(this.allData=t,this.now=this.parkingLotSVC.info24hTime,localStorage.getItem("app-parking-lot-time")){const e=Object.keys(JSON.parse(localStorage.getItem("app-parking-lot-time")));this.recordFilterData=this.coverData(e,t)}else this.recordFilterData=this.getDefult(t);this.changeParkingTime(this.recordFilterData)}}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}ngOnChanges(t){}coverData(t,e){const a={};return t.forEach(t=>{a[t]=e[t]}),a}getDefult(t){const e={};return this.parkingLotSVC.parkSingle.forEach(a=>{t[a]&&(e[a]=t[a])}),e}changeParkingTime(t){const e=[],a=[];Object.keys(t).forEach(i=>{e.push(i),a.push({name:i,type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:t[i]})}),this.parking_time_chartOption={tooltip:{trigger:"axis",formatter:t=>{const e=[],a=[];return t.forEach((t,e)=>{a[e]=`<br>${t.marker}${t.seriesName}\uff1a${t.value}%`}),e.push(a.join("")),`\u5c0f\u6642\uff1a${t[0].axisValue}${e}`}},legend:{type:"scroll",pageTextStyle:{fontSize:14},formatter:function(t){return t.length>6?t.substring(0,6)+"...":t},itemWidth:20,itemHeight:6,right:5,top:8,data:e,orient:"vertical",textStyle:{fontSize:14}},grid:{left:"1%",right:"27%",bottom:"0%",top:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}%`}}],series:a},this.parking_time_chartUpdate={legend:{data:e},series:a},this.parkingCard={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-parking.png",title:"\u505c\u8eca\u5206\u6642\u505c\u8eca\u7387\u8da8\u52e2",updateTime:this.now,openFilter:()=>{this.dialog.open(Ut,{width:"80vw",height:"80vh",data:this.parkingLotSVC.treeData}).afterClosed().subscribe(t=>{t&&(this.recordFilterData=this.getFiterData(t),this.changeParkingTime(this.recordFilterData))})},openLarge:()=>{this.dialog.open(Ft,{width:"80vw",data:this.parking_time_chartUpdate})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578\n\n2. \u8cc7\u6599\u983b\u7387\uff1a1\u5c0f\u6642\n\n3. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"}}getFiterData(t){const e={};return t.forEach(t=>{e[t]=this.allData[t]}),e}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"parking-lot",exist:!1}),localStorage.setItem("app-parking-lot-time",JSON.stringify(this.recordFilterData))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(Kt),f.Qb(x.a),f.Qb(p.b))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-parking-lot-time"]],features:[f.Cb],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"h-100",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.parkingCard),f.Eb(1),f.nc("theme",e.theme)("options",e.parking_time_chartOption))},directives:[C.a,o.a],styles:[".h-100[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})(),Ft=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.update=a,this.hours=Array.from([...Array(24).keys()]),this.parking_time={tooltip:{trigger:"axis",formatter:t=>{const e=[],a=[];return t.forEach((t,e)=>{a[e]=`<br>${t.marker}${t.seriesName}\uff1a${t.value}%`}),e.push(a.join("")),`\u5c0f\u6642\uff1a${t[0].axisValue}${e}`}},legend:{type:"scroll",pageTextStyle:{fontSize:14},itemWidth:20,itemHeight:6,right:5,top:50,data:[],orient:"vertical",textStyle:{fontSize:16}},grid:{left:"1%",right:"20%",bottom:"0%",top:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisLabel:{textStyle:{fontSize:"16"}},axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}%`,textStyle:{fontSize:"16"}}}],series:[{name:"",type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:[]}]},this.parking_time_update={},this.parking_time_update=a}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u505c\u8eca\u5206\u6642\u505c\u8eca\u7387\u8da8\u52e2",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-time-large-dialog"]],decls:11,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",1,"h-100",3,"options","merge","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u505c\u8eca\u5206\u6642\u505c\u8eca\u7387\u8da8\u52e2"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.parking_time)("merge",e.parking_time_update))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[".h-100[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})(),Ut=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.data=a,this.backData="",this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-time-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[".h-100[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})();const Bt="p[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.num[_ngcontent-%COMP%]{font-size:36px;font-weight:600}@media (max-width:1280px){.num[_ngcontent-%COMP%]{font-size:24px}}.unit[_ngcontent-%COMP%]{font-size:24px;font-weight:600}@media (max-width:1280px){.unit[_ngcontent-%COMP%]{font-size:18px}}.red[_ngcontent-%COMP%]{color:#ad2362}.orange[_ngcontent-%COMP%]{color:#e88c26}.green[_ngcontent-%COMP%]{color:#83ba45}.gray[_ngcontent-%COMP%]{color:#b2b2b1}.parking-rate[_ngcontent-%COMP%]{text-align:center}.parking-rate[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{font-size:100px;font-weight:600}.parking-rate[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{font-size:50px;font-weight:600}.center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{justify-content:center}";let Gt=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerSVC=e,this.parkingLotSVC=a,this.destroyed$=new b.a(1),this.recordFilterName="",this.now=u().format("YYYY/MM/DD HH:mm"),this.data24h={},this.dataNow={},this.parkingData={},this.parkingCard={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-parking.png",title:"",updateTime:this.now,actionsOn:!1,latlng:[],help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578  (-1\u8868\u793a\u7121\u8cc7\u6599)\n\n2. \u984f\u8272\u8aaa\u660e\uff1a\u505c\u8eca\u7387 <50%\u7da0\u8272\u300150% <= \u505c\u8eca\u7387 < 80%\u6a58\u8272\u3001\u505c\u8eca\u7387 >= 80%\u7d05\u8272\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u505c\u8eca\u7387\u905480%\n\n4. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n5. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"}}ngOnInit(){this.centerSVC.component$.next({page:"parking-lot",exist:!0}),this.parkingLotSVC.parkTime$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{Object.keys(t).length>0&&(this.now=this.parkingLotSVC.rateTime,this.data24h=t)}),this.parkingLotSVC.parkRateMap$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.dataNow=t,Object.keys(t).length>0&&(this.recordFilterName=localStorage.getItem("app-parking-lot-single"+this.idx)?localStorage.getItem("app-parking-lot-single"+this.idx):this.parkingLotSVC.parkSingle[this.idx],this.changeParkingSingle(t,this.recordFilterName))})}ngOnChanges(t){}changeParkingSingle(t,e){const a=t[e];a&&(this.parkingData={lat:a.lat,leftspace:a.leftspace,lng:a.lng,name:a.name,rate:a.rate,volume:a.volume},this.parkingCard={dialog:this.dialog,belong:"parkingLot",icon:"assets/icons/card/icon-parking.png",title:this.parkingData.name,updateTime:this.now,openFilter:()=>{this.dialog.open(qt,{width:"50vw",data:Object.keys(this.dataNow)}).afterClosed().subscribe(t=>{t&&(this.recordFilterName=t,this.changeParkingSingle(this.dataNow,this.recordFilterName))})},openDetail:()=>{this.dialog.open(Jt,{width:"80vw",data:{parkName:e,data:this.data24h[e]}})},actionsOn:!1,latlng:[this.parkingData.lat,this.parkingData.lng],help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578  (-1\u8868\u793a\u7121\u8cc7\u6599)\n\n2. \u984f\u8272\u8aaa\u660e\uff1a\u505c\u8eca\u7387 <50%\u7da0\u8272\u300150% <= \u505c\u8eca\u7387 < 80%\u6a58\u8272\u3001\u505c\u8eca\u7387 >= 80%\u7d05\u8272\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u505c\u8eca\u7387\u905480%\n\n4. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n5. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API",warning:this.parkingData.rate>=80})}rateStyle(){return this.parkingData.rate?this.parkingData.rate>=80?"red":this.parkingData.rate<80&&this.parkingData.rate>=50?"orange":this.parkingData.rate<50&&this.parkingData.rate>=0?"green":this.parkingData.rate<0?"gray":void 0:"green"}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerSVC.component$.next({page:"parking-lot",exist:!1}),localStorage.setItem("app-parking-lot-single"+this.idx,this.recordFilterName)}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(Kt))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-parking-lot-single"]],inputs:{idx:"idx"},features:[f.Cb],decls:11,vars:6,consts:[[3,"CardSetting"],[1,"parking-rate"],[3,"ngClass"],[1,"num"],[1,"unit"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Wb(1,"p",1),f.Wb(2,"span",2),f.Kc(3),f.Vb(),f.Wb(4,"span",2),f.Kc(5,"%"),f.Vb(),f.Vb(),f.Wb(6,"p"),f.Wb(7,"span",3),f.Kc(8),f.Vb(),f.Wb(9,"span",4),f.Kc(10,"\u5e2d"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.parkingCard),f.Eb(2),f.nc("ngClass",e.rateStyle()),f.Eb(1),f.Lc(""!==e.parkingData.rate?-999!==e.parkingData.rate?e.parkingData.rate:" - ":""),f.Eb(1),f.nc("ngClass",e.rateStyle()),f.Eb(4),f.Nc("",""!==e.parkingData.leftspace?-999!==e.parkingData.rate?e.parkingData.leftspace:" - ":""," / ",e.parkingData.volume,""))},directives:[C.a,i.l],styles:[Bt]}),t})(),Jt=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.all=a,this.parking_rate_one={},this.hours=Array.from([...Array(24).keys()]),this.oneData={},this.oneData=a,this.parking_rate_one={tooltip:{trigger:"axis",formatter:t=>`\u5c0f\u6642\uff1a${t[0].dataIndex}<br>${t[0].marker}${t[0].seriesName}\uff1a${t[0].value}%`},legend:{data:[this.oneData.parkName],textStyle:{fontSize:16}},grid:{left:"5%",right:"5%",bottom:"0%",top:"10%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisTick:{show:!1},axisLabel:{textStyle:{fontSize:"16"}}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}%`,textStyle:{fontSize:"16"}}}],series:[{name:this.oneData.parkName,type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:this.oneData.data}]}}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download=this.oneData.parkName,t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-single-detail-dialog"]],decls:11,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",1,"h-100",3,"options","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(2),f.Lc(e.oneData.parkName),f.Eb(8),f.nc("options",e.parking_rate_one))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[Bt]}),t})(),qt=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.data=a,this.backData="",this.nameList=[],this.nameList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-single-filter-dialog"]],decls:7,vars:2,consts:[[1,"center"],[3,"list","getName"],[1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"app-autocomplete-single",1),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Wb(2,"mat-dialog-actions",2),f.Wb(3,"button",3),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",4),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("list",e.nameList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[k.a,p.c,d.a,p.d],styles:[Bt]}),t})(),Xt=(()=>{class t{constructor(t,e,a){this.dialog=t,this.parkingLotSVC=e,this.centerSVC=a}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(Kt),f.Qb(x.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-parking-lot"]],decls:10,vars:4,consts:[[1,"container"],["carType","car",1,"item6"],[1,"item7"],["carType","moto",1,"item1"],[1,"item2",3,"idx"],[1,"item3",3,"idx"],[1,"item4",3,"idx"],[1,"item5",3,"idx"],[1,"map-layout-control"],[1,"bg-map"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Rb(1,"app-parking-lot-rate1x2",1),f.Rb(2,"app-parking-lot-time",2),f.Rb(3,"app-parking-lot-rate1x2",3),f.Rb(4,"app-parking-lot-single",4),f.Rb(5,"app-parking-lot-single",5),f.Rb(6,"app-parking-lot-single",6),f.Rb(7,"app-parking-lot-single",7),f.Rb(8,"app-map-control",8),f.Vb(),f.Rb(9,"app-main-map",9)),2&t&&(f.Eb(4),f.nc("idx",2),f.Eb(1),f.nc("idx",3),f.Eb(1),f.nc("idx",4),f.Eb(1),f.nc("idx",5))},directives:[Nt,Ht,Gt,v.a,w.a],styles:['.container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item6 switch . . . item1" "item6 switch . . . item1" "item7 item7 item2 item3 item4 item5"}.item1[_ngcontent-%COMP%]{grid-area:item1;z-index:1}.item2[_ngcontent-%COMP%]{grid-area:item2;z-index:1}.item3[_ngcontent-%COMP%]{grid-area:item3;z-index:1}.item4[_ngcontent-%COMP%]{grid-area:item4;z-index:1}.item5[_ngcontent-%COMP%]{grid-area:item5;z-index:1}.item6[_ngcontent-%COMP%]{grid-area:item6;z-index:1}.item7[_ngcontent-%COMP%]{grid-area:item7;z-index:2}.map-layout-control[_ngcontent-%COMP%]{grid-area:switch;width:52px;z-index:1;position:relative;bottom:0;left:0;margin-top:auto}.map-explan-target[_ngcontent-%COMP%]{grid-area:explan;z-index:1;margin-top:auto;margin-left:auto}@media (max-width:1024px){.container[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,minmax(250px,32%));grid-template-areas:"item6 item6  . . item1 item1" "item6 item6  . . item1 item1" "item7 item7 item7 . item2 item2"}.item3[_ngcontent-%COMP%], .item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .map-layout-control[_ngcontent-%COMP%]{display:none}}@media (max-width:800px){.container[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;padding-top:16px;gap:0 0;grid-template-columns:repeat(1,minmax(100px,100%));grid-template-rows:repeat(8,max(400px));grid-template-areas:"item6" "item7" "item1" "item2" "item3" "item4" "item5"}.item1[_ngcontent-%COMP%], .item2[_ngcontent-%COMP%], .item3[_ngcontent-%COMP%], .item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%], .item7[_ngcontent-%COMP%]{max-width:100%}}']}),t})();var Zt=a("cp0P");let te=(()=>{class t{constructor(t){this.centerService=t,this.destroyed$=new b.a(1),this.include="road-kpi",this.start=!1,this.NewAPISwitch=!1,this.roadStaticDict={},this.vd_rank$=new W.a,this.flow_rank$=new W.a,this.flow_24hr$=new W.a,this.speed_rank$=new W.a,this.speed_24hr$=new W.a,this.dynamicTimer={flow_rank:3e5,flow_24hr:3e5,speed_rank:3e5,speed_24hr:3e5},this.getRoadStaticLoading=!1,this._0=this.centerService.pages$.pipe(Object(E.a)(10)).subscribe(t=>{t[this.include]&&t[this.include]>0?(this.NewAPISwitch=!0,this.getNext(this.flow_rank$,"/api/road/flow_rank"),this.getNext(this.flow_24hr$,"/api/road/flow_24hr"),this.getNext(this.speed_rank$,"/api/road/speed_rank"),this.getNext(this.speed_24hr$,"/api/road/speed_24hr")):this.NewAPISwitch=!1}),this._1=Object(I.a)(this.dynamicTimer.flow_rank).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.flow_rank$,"/api/road/flow_rank")}),this._2=Object(I.a)(this.dynamicTimer.flow_24hr).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.flow_24hr$,"/api/road/flow_24hr")}),this._3=Object(I.a)(this.dynamicTimer.speed_rank).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.speed_rank$,"/api/road/speed_rank")}),this._4=Object(I.a)(this.dynamicTimer.speed_24hr).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.speed_24hr$,"/api/road/speed_24hr")})}getRoadStatic(){if(0!==Object.keys(this.roadStaticDict).length||this.getRoadStaticLoading)return;this.getRoadStaticLoading=!0;const t=this.centerService.get("/api/road/vd_section"),e=this.centerService.get("/api/road/gvp_section");Object(Zt.a)([t,e]).pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{t.map(t=>t.data).map(t=>{t.forEach(t=>{this.roadStaticDict[t.id]={name:t.name+"("+t.start_pos+"~"+t.end_pos+")"+t.direction,geometry:t.geometry.map(t=>[t[1],t[0]]),pcu:-1,speed:-1,tti:-1,src_time:t.src_time}})}),this.getRoadStaticLoading=!1})}getNext(t,e){this.start=!0,this.centerService.get(e).pipe(Object(R.a)(t=>"success"===t.code)).subscribe(e=>{t.next(e)})}}return t.\u0275fac=function(e){return new(e||t)(f.ac(x.a))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ee=function(t){return{height:t}},ae=".full[_ngcontent-%COMP%]{width:100%;height:100%}.scroll[_ngcontent-%COMP%]{overflow-y:auto}";let ie=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.yHeight=0,this.originData=[],this.filter={},this.rateAll=[],this.rate10=[],this.treeList=[],this.theme="dark-theme",this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:"\u8def\u6bb5\u7e3e\u6548\u6392\u540d",updateTime:this.now,openFilter:()=>{this.dialog.open(oe,{width:"80vw",height:"80vh",data:this.treeList}).afterClosed().subscribe(t=>{t&&(this.filter={},t.map(t=>this.filter[t]=!0),this.filterData())})},openLarge:()=>{this.dialog.open(ne,{width:"80vw",height:"80vh",data:{rateAll:this.rateAll,chartOption:this.chartOption,yHeight:this.yHeight}})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u65c5\u884c\u6642\u9593\u6307\u6578(TTI)=\u884c\u99db\u901f\u7387/\u81ea\u7531\u6d41\u901f\u7387\n\n2. \u984f\u8272\u8aaa\u660e\uff1aTTI <= 0.55\u7d05\u8272\u30010.55 < TTI <= 0.65\u6a58\u8272\u3001TTI > 0.65\u7da0\u8272\n\n3. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n4. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD\u3001GVP\n\n5. \u5176\u4ed6\u8aaa\u660e\uff1a\u81ea\u7531\u6d41\u901f\u7387\u4f7f\u7528\u51cc\u6668\u6642\u6bb501:00~05:00\u65c5\u884c\u901f\u7387\u8cc7\u6599\u9032\u884c\u6392\u5e8f\uff0c\u53d6\u7b2c85%\u4f4d\u6578(\u5243\u9664\u5c11\u6578\u6975\u7aef\u503c)\u4f5c\u70ba\u5404\u8def\u6bb5\u81ea\u7531\u6d41\u901f\u7387\u3002"},this.chartOption={}}ngOnInit(){this.filter=localStorage.getItem("app-road-speed-rate1x2")?JSON.parse(localStorage.getItem("app-road-speed-rate1x2")):{"\u81e8\u6d77\u4e8c\u8def(\u6ff1\u6d77\u4e8c\u8def~\u9f13\u5c71\u4e00\u8def)\u5f80\u6771":!0,"\u81e8\u6d77\u4e8c\u8def(\u9f13\u5c71\u4e00\u8def~\u6ff1\u6d77\u4e8c\u8def)\u5f80\u897f":!0,"\u4e94\u798f\u4e09\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u6771":!0,"\u4e94\u798f\u4e09\u8def(\u4e2d\u83ef\u56db\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f":!0,"\u4e03\u8ce2\u4e8c\u8def(\u4e03\u8ce2\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u6771":!0,"\u4e03\u8ce2\u4e8c\u8def(\u6210\u529f\u4e00\u8def~\u4e03\u8ce2\u4e09\u8def)\u5f80\u897f":!0,"\u6210\u529f\u4e00\u8def(\u5efa\u570b\u4e09\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e8c\u8def(\u5fa9\u8208\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357":!0,"\u6210\u529f\u4e8c\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317":!0,"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357":!0,"\u4e2d\u83ef\u4e94\u8def(\u5fa9\u8208\u4e09\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357":!0,"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u51f1\u65cb\u56db\u8def)\u5f80\u5357":!0,"\u4e2d\u83ef\u4e94\u8def(\u51f1\u65cb\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5317":!0,"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317":!0,"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317":!0,"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u4e2d\u5c71\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u5c71\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f":!0,"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317":!0,"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357":!0,"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317":!0,"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357":!0,"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771":!0,"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f":!0,"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771":!0,"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f":!0},this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.speed_rank$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.originData=t.data,this.treelistBuild(t.data),this.filterData()}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-speed-rate1x2",JSON.stringify(this.filter))}treelistBuild(t){let e={},a=1;this.treeList=[],e["\u570b\u6176\u7130\u706b\u9810\u8a2d"]=0,this.treeList.push({text:"\u570b\u6176\u7130\u706b\u9810\u8a2d",value:"\u570b\u6176\u7130\u706b\u9810\u8a2d",collapsed:!0,children:[{text:"\u6210\u529f\u4e00\u8def(\u5efa\u570b\u4e09\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u5efa\u570b\u4e09\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e8c\u8def(\u5fa9\u8208\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357",value:"\u6210\u529f\u4e8c\u8def(\u5fa9\u8208\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357"},{text:"\u6210\u529f\u4e8c\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e8c\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317"},{text:"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357",value:"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357"},{text:"\u4e2d\u83ef\u4e94\u8def(\u5fa9\u8208\u4e09\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357",value:"\u4e2d\u83ef\u4e94\u8def(\u5fa9\u8208\u4e09\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357"},{text:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u51f1\u65cb\u56db\u8def)\u5f80\u5357",value:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u51f1\u65cb\u56db\u8def)\u5f80\u5357"},{text:"\u4e2d\u83ef\u4e94\u8def(\u51f1\u65cb\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5317",value:"\u4e2d\u83ef\u4e94\u8def(\u51f1\u65cb\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5317"},{text:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317",value:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317"},{text:"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317",value:"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317"},{text:"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u4e2d\u5c71\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u4e2d\u5c71\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u5c71\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u5c71\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f"},{text:"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317",value:"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317"},{text:"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357",value:"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357"},{text:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317",value:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317"},{text:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357",value:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357"},{text:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771",value:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771"},{text:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f",value:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f"},{text:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771",value:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771"},{text:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f",value:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f"}]}),t.forEach(t=>{e.hasOwnProperty(t.area_name)?this.treeList[e[t.area_name]].children.push({text:t.name,value:t.name}):(e[t.area_name]=a,a++,this.treeList.push({text:t.area_name,value:"",collapsed:!0,children:[{text:t.name,value:t.name}]}))})}filterData(){let t=[],e=[],a=[];this.rateAll=0===Object.keys(this.filter).length?this.originData.map(t=>(0===t.speed&&(t.speed=null,t.tti=null),t)):this.originData.filter(t=>this.filter[t.name]).map(t=>(0===t.speed&&(t.speed=null,t.tti=null),t)),this.yHeight=60*this.rateAll.length,this.rateAll.sort((t,e)=>t.tti-e.tti),this.rateAll.filter(t=>t.tti).slice(0,10).forEach(i=>{let n,o;i.tti?(n=Math.round(100*i.tti)/100,o=i.name+"&&"+n+" "+i.speed):(n=999,o=i.name+"&&-- --"),t.push(o),e.push(1),a.push(n>.65?{value:n,itemStyle:{color:"#83BA45"}}:n<=.55?{value:n,itemStyle:{color:"#AD2362"}}:{value:n,itemStyle:{color:"#E88C26"}})}),this.chartOption={grid:{top:"2%",left:"5%",right:"25%",bottom:"5%"},xAxis:{type:"value",min:0,max:1,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:t,inverse:!1,animationDuration:300,animationDurationUpdate:300,max:9},title:{text:"TTI km/hr",right:0,top:-5,textStyle:{fontWeight:"normal",fontSize:14,fontFamily:"oswald"}},series:[{realtimeSort:!0,type:"bar",data:e,barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(t){let e=t.name.split("&&")[1].split(" ");for(e[0].indexOf(".")<0&&"--"!=e[0]&&(e[0]+=".");e[0].length<4&&"--"!=e[0];)e[0]+="0";return e[0]+"   "+e[1]},textStyle:{fontSize:12}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-18],valueAnimation:!0,formatter:function(t){const e=t.name.split("&&")[0];return e.length>10?e.substring(0,10)+"...":e},textStyle:{fontSize:14}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-speed-rate1x2"]],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"full",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(1),f.nc("theme",e.theme)("options",e.chartOption))},directives:[C.a,o.a],styles:[ae]}),t})(),ne=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.dialogUpdate={}}ngOnInit(){this.yHeight=this.data.yHeight;let t=[],e=[],a=[];this.data.rateAll.forEach(i=>{let n,o;i.tti?(n=Math.round(100*i.tti)/100,o=i.name+"&&"+n+" "+i.speed):(n=999,o=i.name+"&&-- --"),t.push(o),e.push(1),a.push(999===n?{value:n,itemStyle:{color:"#AD2362"}}:n>.65?{value:n,itemStyle:{color:"#83BA45"}}:n<=.55?{value:n,itemStyle:{color:"#AD2362"}}:{value:n,itemStyle:{color:"#E88C26"}})}),this.dialogUpdate={grid:{top:"60px",bottom:"0%",left:"0%",right:"7%"},yAxis:{data:t,max:-1},title:{text:"TTI   km/hr",right:10,top:48,textStyle:{fontWeight:"normal",fontSize:16,fontFamily:"oswald"}},series:[{data:e,label:{textStyle:{fontSize:16,color:"#000000"}}},{data:a,barCategoryGap:"50%",label:{offset:[-5,-22],formatter:function(t){return t.name.split("&&")[0]},textStyle:{fontSize:16,color:"#000000"}}}]}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u8def\u6bb5\u7e3e\u6548\u6392\u540d",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-rate1x2-large-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",3,"options","merge","ngStyle","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u8def\u6bb5\u7e3e\u6548\u6392\u540d"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.data.chartOption)("merge",e.dialogUpdate)("ngStyle",f.qc(3,ee,e.yHeight+"px")))},directives:[p.h,d.a,r.a,p.d,p.e,o.a,i.o],styles:[ae]}),t})(),oe=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.roadKpiService=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(te),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-rate1x2-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[ae]}),t})();const re=function(t){return{height:t}};let ce=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.originData=[],this.filter={},this.yHeight=0,this.rateAll=[],this.rate10=[],this.treeList=[],this.chartOption={},this.theme="dark-theme",this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:"\u5728\u7dda\u8eca\u8f1b\u6578\u6392\u540d",updateTime:this.now,openFilter:()=>{this.dialog.open(le,{width:"80vw",height:"80vh",data:this.treeList}).afterClosed().subscribe(t=>{t&&(this.filter={},t.map(t=>this.filter[t]=!0),this.filterData())})},openLarge:()=>{this.dialog.open(se,{width:"80vw",height:"80vh",data:{rateAll:this.rateAll,chartOption:this.chartOption,yHeight:this.yHeight}})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u4ee5\u8def\u6bb5VD\u5075\u6e2c\u4e4b5\u5206\u9418\u4e0d\u5206\u8eca\u9053\u6d41\u91cf\u9032\u884c\u6392\u540d\n\n2. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n3. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD"}}ngOnInit(){this.filter=localStorage.getItem("app-road-car-rate1x2")?JSON.parse(localStorage.getItem("app-road-car-rate1x2")):{"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317":!0,"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357":!0,"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317":!0,"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357":!0,"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771":!0,"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f":!0,"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771":!0,"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u4e8c\u8def(\u6c11\u65cf\u4e8c\u8def~\u548c\u5e73\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f":!0,"\u4e09\u591a\u56db\u8def(\u4e2d\u83ef\u56db\u8def~\u4e2d\u5c71\u4e8c\u8def)\u5f80\u6771":!0,"\u4e09\u591a\u56db\u8def(\u4e2d\u5c71\u4e8c\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u897f":!0,"\u4e2d\u5c71\u4e09\u8def(\u5fa9\u8208\u4e09\u8def~\u6c11\u6b0a\u4e8c\u8def)\u5f80\u5357":!0,"\u4e2d\u5c71\u4e09\u8def(\u6c11\u6b0a\u4e8c\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317":!0,"\u4e2d\u5c71\u4e8c\u8def(\u8208\u4e2d\u4e00\u8def~\u56db\u7dad\u4e09\u8def)\u5f80\u5317":!0,"\u4e2d\u5c71\u4e8c\u8def(\u56db\u7dad\u4e09\u8def~\u8208\u4e2d\u4e00\u8def)\u5f80\u5357":!0},this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.flow_rank$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.originData=t.data,this.treelistBuild(t.data),this.filterData()}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-car-rate1x2",JSON.stringify(this.filter))}treelistBuild(t){let e={},a=1;this.treeList=[],e["\u570b\u6176\u7130\u706b\u9810\u8a2d"]=0,this.treeList.push({text:"\u570b\u6176\u7130\u706b\u9810\u8a2d",value:"\u570b\u6176\u7130\u706b\u9810\u8a2d",collapsed:!0,children:[{text:"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317",value:"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317"},{text:"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357",value:"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357"},{text:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317",value:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317"},{text:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357",value:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357"},{text:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771",value:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771"},{text:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f",value:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f"},{text:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771",value:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771"},{text:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f",value:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u4e8c\u8def(\u6c11\u65cf\u4e8c\u8def~\u548c\u5e73\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u4e8c\u8def(\u6c11\u65cf\u4e8c\u8def~\u548c\u5e73\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f"},{text:"\u4e09\u591a\u56db\u8def(\u4e2d\u83ef\u56db\u8def~\u4e2d\u5c71\u4e8c\u8def)\u5f80\u6771",value:"\u4e09\u591a\u56db\u8def(\u4e2d\u83ef\u56db\u8def~\u4e2d\u5c71\u4e8c\u8def)\u5f80\u6771"},{text:"\u4e09\u591a\u56db\u8def(\u4e2d\u5c71\u4e8c\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u897f",value:"\u4e09\u591a\u56db\u8def(\u4e2d\u5c71\u4e8c\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u897f"},{text:"\u4e2d\u5c71\u4e09\u8def(\u5fa9\u8208\u4e09\u8def~\u6c11\u6b0a\u4e8c\u8def)\u5f80\u5357",value:"\u4e2d\u5c71\u4e09\u8def(\u5fa9\u8208\u4e09\u8def~\u6c11\u6b0a\u4e8c\u8def)\u5f80\u5357"},{text:"\u4e2d\u5c71\u4e09\u8def(\u6c11\u6b0a\u4e8c\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317",value:"\u4e2d\u5c71\u4e09\u8def(\u6c11\u6b0a\u4e8c\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317"},{text:"\u4e2d\u5c71\u4e8c\u8def(\u8208\u4e2d\u4e00\u8def~\u56db\u7dad\u4e09\u8def)\u5f80\u5317",value:"\u4e2d\u5c71\u4e8c\u8def(\u8208\u4e2d\u4e00\u8def~\u56db\u7dad\u4e09\u8def)\u5f80\u5317"},{text:"\u4e2d\u5c71\u4e8c\u8def(\u56db\u7dad\u4e09\u8def~\u8208\u4e2d\u4e00\u8def)\u5f80\u5357",value:"\u4e2d\u5c71\u4e8c\u8def(\u56db\u7dad\u4e09\u8def~\u8208\u4e2d\u4e00\u8def)\u5f80\u5357"}]}),t.forEach(t=>{e.hasOwnProperty(t.area_name)?this.treeList[e[t.area_name]].children.push({text:t.name,value:t.name}):(e[t.area_name]=a,a++,this.treeList.push({text:t.area_name,value:"",collapsed:!0,children:[{text:t.name,value:t.name}]}))})}filterData(){let t=[],e=[],a=[];this.rateAll=0===Object.keys(this.filter).length?this.originData:this.originData.filter(t=>this.filter[t.name]),this.yHeight=60*this.rateAll.length,this.rateAll.sort((t,e)=>t.tti-e.tti);const i=this.rateAll.slice(0,10);let n=0;i.forEach(i=>{const o=Math.round(i.pcu);o>n&&(n=o),t.push(i.name+"&&"+o),e.push(1),a.push({value:o,itemStyle:{color:"#807C78"}})}),e.fill(n),this.chartOption={grid:{top:"2%",left:"5%",right:"15%",bottom:"5%"},xAxis:{type:"value",min:0,max:n,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:t,inverse:!0,animationDuration:300,animationDurationUpdate:300,max:9},title:{text:"pcu",right:"4%",top:-5,textStyle:{fontWeight:"normal",fontSize:14,fontFamily:"oswald"}},series:[{realtimeSort:!0,type:"bar",data:e,barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(t){return parseInt(t.name.split("&&")[1]).toLocaleString()},textStyle:{fontSize:12}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-22],valueAnimation:!0,formatter:function(t){const e=t.name.split("&&")[0];return e.length>10?e.substring(0,10)+"...":e},textStyle:{fontSize:14}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-car-rate1x2"]],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"full",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(1),f.nc("theme",e.theme)("options",e.chartOption))},directives:[C.a,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),se=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.dialogUpdate={}}ngOnInit(){this.yHeight=this.data.yHeight;let t=[],e=[],a=[],i=0;this.data.rateAll.forEach(n=>{n.pcu>i&&(i=n.pcu),t.push(n.name+"&&"+n.pcu),e.push(1),a.push({value:n.pcu,itemStyle:{color:"#807C78"}})}),e.fill(i),this.dialogUpdate={grid:{top:"60px",left:"5%",right:"5%",bottom:"0%"},xAxis:{max:i},yAxis:{data:t,max:-1},title:{text:"pcu",right:"2.5%",top:50,textStyle:{fontWeight:"normal",fontSize:16,fontFamily:"oswald"}},series:[{data:e,label:{textStyle:{fontSize:16,color:"#000000"}}},{data:a,barCategoryGap:"50%",label:{offset:[-5,-22],formatter:function(t){return t.name.split("&&")[0]},textStyle:{fontSize:16,color:"#000000"}}}]}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u5728\u7dda\u8eca\u8f1b\u6578\u6392\u540d",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-rate1x2-large-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",3,"options","merge","ngStyle","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u5728\u7dda\u8eca\u8f1b\u6578\u6392\u540d"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.data.chartOption)("merge",e.dialogUpdate)("ngStyle",f.qc(3,re,e.yHeight+"px")))},directives:[p.h,d.a,r.a,p.d,p.e,o.a,i.o],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),le=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.roadKpiService=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(te),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-car-rate1x2-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),de=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.hours=Array.from([...Array(24).keys()]),this.now=u().format("YYYY/MM/DD HH:mm"),this.originData=[],this.treeList=[],this.filter={},this.theme="dark-theme",this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:"\u8def\u6bb5\u5206\u6642\u884c\u99db\u901f\u7387\u8da8\u52e2",updateTime:this.now,openFilter:()=>{this.dialog.open(pe,{width:"80vw",height:"80vh",data:this.treeList}).afterClosed().subscribe(t=>{t&&(this.filter={},t.map(t=>this.filter[t]=!0),this.filterData())})},openLarge:()=>{this.dialog.open(he,{width:"80vw",height:"80vh",data:{chartOption:this.chartOption}})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a1\u5c0f\u6642\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD\u3001GVP"},this.chartOption={}}ngOnInit(){this.filter=localStorage.getItem("app-road-speed-trend2x1")?JSON.parse(localStorage.getItem("app-road-speed-trend2x1")):{"\u4e94\u798f\u4e09\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u6771":!0,"\u4e94\u798f\u4e09\u8def(\u4e2d\u83ef\u56db\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f":!0,"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317":!0,"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357":!0,"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317":!0,"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f":!0},this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.speed_24hr$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.originData=t.data,this.treelistBuild(t.data),this.filterData()}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}treelistBuild(t){let e={},a=1;this.treeList=[],e["\u570b\u6176\u7130\u706b\u9810\u8a2d"]=0,this.treeList.push({text:"\u570b\u6176\u7130\u706b\u9810\u8a2d",value:"\u570b\u6176\u7130\u706b\u9810\u8a2d",collapsed:!0,children:[{text:"\u4e94\u798f\u4e09\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u6771",value:"\u4e94\u798f\u4e09\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u6771"},{text:"\u4e94\u798f\u4e09\u8def(\u4e2d\u83ef\u56db\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f",value:"\u4e94\u798f\u4e09\u8def(\u4e2d\u83ef\u56db\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f"},{text:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317"},{text:"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357",value:"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357"},{text:"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317",value:"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317"},{text:"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f"}]}),t.forEach(t=>{e.hasOwnProperty(t.area_name)?this.treeList[e[t.area_name]].children.push({text:t.name,value:t.name}):(e[t.area_name]=a,a++,this.treeList.push({text:t.area_name,value:"",collapsed:!0,children:[{text:t.name,value:t.name}]}))})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-speed-trend2x1",JSON.stringify(this.filter))}filterData(){let t=[],e=[];this.originData.forEach(a=>{this.filter&&this.filter[a.name]&&(t.push(a.name),e.push({name:a.name,type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:a.speed_hr24.map(t=>-1===t?null:t)}))}),this.chartOption={tooltip:{trigger:"axis",formatter:t=>{const e=[],a=[];return t.forEach((t,e)=>{a[e]=`<br>${t.marker}${t.seriesName}\uff1a${t.value} km/hr`}),e.push(a.join("")),`\u5c0f\u6642\uff1a${t[0].axisValue}${e}`}},legend:{type:"scroll",itemWidth:20,itemHeight:5,right:5,top:10,data:t,orient:"vertical",textStyle:{fontSize:12},formatter:function(t){return t.length>6?t.substring(0,6)+"...":t}},grid:{left:"5%",right:"20%",bottom:"5%",top:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}`}}],series:e}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-speed-trend2x1"]],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"full",3,"theme","options"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(1),f.nc("theme",e.theme)("options",e.chartOption))},directives:[C.a,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),he=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.destroyed$=new b.a(1)}ngOnInit(){this.chartOption={tooltip:{trigger:"axis",formatter:t=>{const e=[],a=[];return t.forEach((t,e)=>{a[e]=`<br>${t.marker}${t.seriesName}\uff1a${t.value} km/hr`}),e.push(a.join("")),`\u5c0f\u6642\uff1a${t[0].axisValue}${e}`}},legend:{type:"scroll",itemWidth:20,itemHeight:5,right:50,top:50,data:this.data.chartOption.legend.data,orient:"vertical",textStyle:{fontSize:16,color:"#000000"},formatter:function(t){return t.length>15?t.substring(0,15)+"\n"+t.substring(16):t}},grid:{left:"5%",right:"20%",bottom:"5%",top:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.data.chartOption.xAxis.data,axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}`}}],series:this.data.chartOption.series},this.roadKpiService.speed_24hr$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{console.log("road-speed-trend2x1 \u66f4\u65b0")}),delete this.data.chartOption.yAxis.max}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u8def\u6bb5\u5206\u6642\u884c\u99db\u901f\u7387\u8da8\u52e2",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-trend2x1-large-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],[1,"full"],["echarts","",1,"full",3,"options","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u8def\u6bb5\u5206\u6642\u884c\u99db\u901f\u7387\u8da8\u52e2"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content",4),f.Wb(10,"div",5),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.chartOption))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),pe=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.roadKpiService=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(te),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-trend2x1-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();const me=".full[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-around}.num[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.num[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:100px;font-weight:600;line-height:100px}@media (max-width:1280px){.num[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:100px}}.unit[_ngcontent-%COMP%]{text-align:right;margin-bottom:0}.unit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.red[_ngcontent-%COMP%]{color:#ad2362}.orange[_ngcontent-%COMP%]{color:#e88c26}.green[_ngcontent-%COMP%]{color:#83ba45}.center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{justify-content:center}";let ge=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.origindata={},this.speed_rankData={},this.speed_24hrData={},this.speeeeeeed=-1,this.tti=.5,this.name="\u4e03\u8ce2\u4e8c\u8def(\u6210\u529f\u4e00\u8def~\u4e03\u8ce2\u4e09\u8def)\u5f80\u897f",this.color="green",this.hr24=[],this.latlng=[],this.allRoad=[],this.hours=Array.from([...Array(24).keys()]),this.threshold_warning=.45,this.threshold_hight=.55,this.threshold_low=.65,this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:this.name,updateTime:this.now,latlng:[],openFilter:()=>{this.dialog.open(ue,{width:"50vw",data:this.allRoad}).afterClosed().subscribe(t=>{t&&this.targetChange(t)})},openDetail:()=>{this.dialog.open(be,{width:"80vw",height:"80vh",data:{chartOption:this.chartOption,chartUpdate:this.chartUpdate}})},help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u984f\u8272\u8aaa\u660e\uff1aTTI <= 0.55\u7d05\u8272\u30010.55 < TTI <= 0.65\u6a58\u8272\u3001TTI > 0.65\u7da0\u8272\n\n2. \u8b66\u793a\u9580\u6abb\uff1a\u8a72\u8def\u6bb5\u4e4b\u901f\u7387\u6b77\u53f2\u8cc7\u6599\u5e73\u5747\u503c(\u5206\u5e73\u5047\u65e5\u3001\u500b\u5225\u5c0f\u6642)\u6e1b\u63892\u500b\u6a19\u6e96\u5dee\n\n3. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n4. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD\u3001GVP\n\n5. \u5176\u4ed6\u8aaa\u660e\uff1a\n(1)\u65c5\u884c\u6642\u9593\u6307\u6578(TTI)=\u884c\u99db\u901f\u7387/\u81ea\u7531\u6d41\u901f\u7387\n(2)\u81ea\u7531\u6d41\u901f\u7387\u4f7f\u7528\u51cc\u6668\u6642\u6bb501:00~05:00\u65c5\u884c\u901f\u7387\u8cc7\u6599\u9032\u884c\u6392\u5e8f\uff0c\u53d6\u7b2c85%\u4f4d\u6578(\u5243\u9664\u5c11\u6578\u6975\u7aef\u503c)\u4f5c\u70ba\u5404\u8def\u6bb5\u81ea\u7531\u6d41\u901f\u7387\u3002"},this.chartUpdate={},this.chartOption={tooltip:{trigger:"axis",formatter:t=>`\u5c0f\u6642\uff1a${t[0].dataIndex}<br>${t[0].marker}${t[0].seriesName}\uff1a${t[0].value}km/hr`},legend:{data:[this.name]},grid:{left:"5%",right:"5%",bottom:"0%",top:"10%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}`}}],series:[{name:this.name,type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:this.hr24}]}}ngOnInit(){localStorage.getItem("app-road-speed-single1x1")&&(this.name=JSON.parse(localStorage.getItem("app-road-speed-single1x1"))),this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.speed_rank$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.speed_rankData={},t.data.forEach(t=>{this.speed_rankData[t.name]=Object.assign({},t),this.allRoad.push(t.name)}),this.allRoad=[...new Set(this.allRoad)],this.targetChange(this.name)}),this.roadKpiService.speed_24hr$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.speed_24hrData={},t.data.forEach(t=>{this.speed_24hrData[t.name]=t.speed_hr24,this.allRoad.push(t.name)}),this.allRoad=[...new Set(this.allRoad)],this.targetChange(this.name)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-speed-single1x1",JSON.stringify(this.name))}targetChange(t){if(this.speed_rankData.hasOwnProperty(t)){const e=this.speed_rankData[t];this.name=e.name,this.cardSetting.title=e.name,this.tti=e.tti,this.speeeeeeed=e.speed?e.speed:-1,this.cardSetting.latlng=[],this.roadKpiService.roadStaticDict[e.l_id]&&(this.cardSetting.latlng=this.roadKpiService.roadStaticDict[e.l_id].geometry[0]),this.color=this.tti<=this.threshold_hight?"red":this.tti>this.threshold_low?"green":"orange",this.cardSetting.warning=this.tti<=this.threshold_hight,this.speed_24hrData[this.name]&&(this.hr24=this.speed_24hrData[this.name].map(t=>-1===t?null:t)),this.chartUpdate={legend:{data:[this.name]},series:[{name:this.name,data:this.hr24}]}}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-speed-single1x1"]],decls:9,vars:9,consts:[[3,"CardSetting"],[1,"full"],[1,"num"],[1,"unit"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Wb(1,"div",1),f.Wb(2,"p",2),f.Wb(3,"span"),f.Kc(4),f.ic(5,"number"),f.Vb(),f.Vb(),f.Wb(6,"p",3),f.Wb(7,"span"),f.Kc(8,"km/hr"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(3),f.Gb(e.color),f.Eb(1),f.Lc(-1===e.speeeeeeed?"--":f.kc(5,6,e.speeeeeeed,"1.0-0")),f.Eb(3),f.Gb(e.color))},directives:[C.a],pipes:[i.f],styles:[me]}),t})(),be=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.hours=Array.from([...Array(24).keys()]),this.destroyed$=new b.a(1)}ngOnInit(){}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download=this.data.chartUpdate.legend.data[0],t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-single1x1-detail-dialog"]],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],[1,"full"],["echarts","",1,"full",3,"options","merge","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content",4),f.Wb(10,"div",5),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(2),f.Lc(e.data.chartUpdate.legend.data[0]),f.Eb(8),f.nc("options",e.data.chartOption)("merge",e.data.chartUpdate))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[me]}),t})(),ue=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.name="",this.nameList=[]}sure(){console.log(this.name)}getName(t){this.name=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-single1x1-filter-dialog"]],decls:7,vars:2,consts:[[1,"center"],[3,"list","getName"],[1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"app-autocomplete-single",1),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Wb(2,"mat-dialog-actions",2),f.Wb(3,"button",3),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",4),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("list",e.data),f.Eb(2),f.nc("mat-dialog-close",e.name))},directives:[k.a,p.c,d.a,p.d],styles:[me]}),t})();const fe=".full[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-around}.num[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.num[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:100px;font-weight:600;line-height:100px}@media (max-width:1280px){.num[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:100px}}.unit[_ngcontent-%COMP%]{text-align:right;margin-bottom:0}.unit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.red[_ngcontent-%COMP%]{color:#ad2362}.orange[_ngcontent-%COMP%]{color:#e88c26}.green[_ngcontent-%COMP%]{color:#83ba45}.center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{justify-content:center}";let xe=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.now=u().format("YYYY/MM/DD HH:mm"),this.flow_rankData={},this.flow_24hrData={},this.allRoad=[],this.threshold_warning=1e4,this.threshold_hight=8e3,this.threshold_low=4e3,this.pcu=0,this.name="\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f",this.color="nothing",this.hr24=[],this.hours=Array.from([...Array(24).keys()]),this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:this.name,updateTime:this.now,latlng:[],openFilter:()=>{this.dialog.open(we,{width:"50vw",data:this.allRoad}).afterClosed().subscribe(t=>{t&&this.targetChange(t)})},openDetail:()=>{this.dialog.open(ye,{width:"80vw",height:"80vh",data:{chartOption:this.chartOption,chartUpdate:this.chartUpdate}})},help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u8def\u6bb5VD\u5075\u6e2c\u4e4b5\u5206\u9418\u4e0d\u5206\u8eca\u9053\u6d41\u91cf\n\n2. \u8b66\u793a\u9580\u6abb\uff1a\u8a72\u8def\u6bb5\u4e4b\u5728\u7dda\u8eca\u8f1b\u6578\u6b77\u53f2\u8cc7\u6599\u5e73\u5747\u503c(\u5206\u5e73\u5047\u65e5\u3001\u500b\u5225\u5c0f\u6642)\u52a0\u4e0a\u5169\u500b\u6a19\u6e96\u5dee\n\n3. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n4. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD"},this.chartUpdate={},this.chartOption={tooltip:{trigger:"axis",formatter:t=>`\u5c0f\u6642\uff1a${t[0].dataIndex}<br>${t[0].marker}${t[0].seriesName}\uff1a${t[0].value} pcu`},legend:{data:[this.name]},grid:{left:"5%",right:"5%",bottom:"0%",top:"10%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}`}}],series:[{name:this.name,type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:this.hr24}]}}ngOnInit(){localStorage.getItem("app-road-car-single1x1")&&(this.name=JSON.parse(localStorage.getItem("app-road-car-single1x1"))),this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.flow_rank$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.flow_rankData={},t.data.forEach(t=>{this.flow_rankData[t.name]=Object.assign({},t),this.allRoad.push(t.name)}),this.allRoad=[...new Set(this.allRoad)],this.targetChange(this.name)}),this.roadKpiService.flow_24hr$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.flow_24hrData={},t.data.forEach(t=>{this.flow_24hrData[t.name]=t.pcu_hr24,this.allRoad.push(t.name)}),this.allRoad=[...new Set(this.allRoad)],this.targetChange(this.name)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-car-single1x1",JSON.stringify(this.name))}targetChange(t){if(this.flow_rankData.hasOwnProperty(t)){const e=this.flow_rankData[t];this.name=e.name,this.cardSetting.title=e.name,this.pcu=e.pcu?e.pcu:-1,this.cardSetting.latlng=[],this.roadKpiService.roadStaticDict[e.l_id]&&(this.cardSetting.latlng=this.roadKpiService.roadStaticDict[e.l_id].geometry[0]),this.color="nothing",this.cardSetting.warning=this.pcu>=this.threshold_hight}this.flow_24hrData.hasOwnProperty(this.name)&&(this.hr24=this.flow_24hrData[this.name].map(t=>-1===t?null:t),this.chartUpdate={legend:{data:[this.name]},series:[{name:this.name,data:this.hr24}]})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-car-single1x1"]],decls:9,vars:9,consts:[[3,"CardSetting"],[1,"full"],[1,"num"],[1,"unit"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Wb(1,"div",1),f.Wb(2,"p",2),f.Wb(3,"span"),f.Kc(4),f.ic(5,"number"),f.Vb(),f.Vb(),f.Wb(6,"p",3),f.Wb(7,"span"),f.Kc(8,"PCU"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(3),f.Gb(e.color),f.Eb(1),f.Lc(-1===e.pcu?"--":f.kc(5,6,e.pcu,"1.0-0")),f.Eb(3),f.Gb(e.color))},directives:[C.a],pipes:[i.f],styles:[fe]}),t})(),ye=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.hours=Array.from([...Array(24).keys()]),this.destroyed$=new b.a(1)}ngOnInit(){}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download=this.data.chartUpdate.legend.data[0],t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-car-single1x1-detail-dialog"]],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],[1,"full"],["echarts","",1,"full",3,"options","merge","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content",4),f.Wb(10,"div",5),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(2),f.Lc(e.data.chartUpdate.legend.data[0]),f.Eb(8),f.nc("options",e.data.chartOption)("merge",e.data.chartUpdate))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[fe]}),t})(),we=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.name="",this.nameList=[]}sure(){console.log(this.name)}getName(t){this.name=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-car-single1x1-filter-dialog"]],decls:7,vars:2,consts:[[1,"center"],[3,"list","getName"],[1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"app-autocomplete-single",1),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Wb(2,"mat-dialog-actions",2),f.Wb(3,"button",3),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",4),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("list",e.data),f.Eb(2),f.nc("mat-dialog-close",e.name))},directives:[k.a,p.c,d.a,p.d],styles:[fe]}),t})(),Ce=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.filter={},this.originData=[],this.treeList=[],this.hours=Array.from([...Array(24).keys()]),this.now=u().format("YYYY/MM/DD HH:mm"),this.chartOption={},this.theme="dark-theme",this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:"\u8def\u6bb5\u5206\u6642\u5728\u7dda\u8eca\u8f1b\u6578\u8da8\u52e2",updateTime:this.now,openFilter:()=>{this.dialog.open(_e,{width:"80vw",height:"80vh",data:this.treeList}).afterClosed().subscribe(t=>{t&&(this.filter={},t.map(t=>this.filter[t]=!0),this.filterData())})},openLarge:()=>{this.dialog.open(ve,{width:"80vw",height:"80vh",data:{chartOption:this.chartOption}})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u8def\u6bb5VD\u5075\u6e2c\u4e4b\u5206\u6642\u4e0d\u5206\u8eca\u9053\u6d41\u91cf\n\n2. \u8cc7\u6599\u983b\u7387\uff1a1\u5c0f\u6642\n\n3. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD\n"}}ngOnInit(){this.filter=localStorage.getItem("app-road-car-trend2x1")?JSON.parse(localStorage.getItem("app-road-car-trend2x1")):{"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317":!0,"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357":!0,"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771":!0,"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f":!0,"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771":!0,"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u4e8c\u8def(\u6c11\u65cf\u4e8c\u8def~\u548c\u5e73\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f":!0},this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.flow_24hr$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.originData=t.data,this.treelistBuild(t.data),this.filterData()}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-car-trend2x1",JSON.stringify(this.filter))}treelistBuild(t){let e={},a=1;this.treeList=[],e["\u570b\u6176\u7130\u706b\u9810\u8a2d"]=0,this.treeList.push({text:"\u570b\u6176\u7130\u706b\u9810\u8a2d",value:"\u570b\u6176\u7130\u706b\u9810\u8a2d",collapsed:!0,children:[{text:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317",value:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317"},{text:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357",value:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357"},{text:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771",value:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771"},{text:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f",value:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f"},{text:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771",value:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771"},{text:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f",value:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u4e8c\u8def(\u6c11\u65cf\u4e8c\u8def~\u548c\u5e73\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u4e8c\u8def(\u6c11\u65cf\u4e8c\u8def~\u548c\u5e73\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u4e8c\u8def(\u548c\u5e73\u4e00\u8def~\u6c11\u65cf\u4e8c\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f"}]}),t.forEach(t=>{e.hasOwnProperty(t.area_name)?this.treeList[e[t.area_name]].children.push({text:t.name,value:t.name}):(e[t.area_name]=a,a++,this.treeList.push({text:t.area_name,value:"",collapsed:!0,children:[{text:t.name,value:t.name}]}))})}filterData(){let t=[],e=[];this.originData.forEach(a=>{this.filter[a.name]&&(t.push(a.name),e.push({name:a.name,type:"line",label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{lineStyle:{width:3}}},data:a.pcu_hr24.map(t=>-1===t?null:t)}))}),this.chartOption={tooltip:{trigger:"axis",formatter:t=>{const e=[],a=[];return t.forEach((t,e)=>{a[e]=`<br>${t.marker}${t.seriesName}\uff1a${t.value} pcu`}),e.push(a.join("")),`\u5c0f\u6642\uff1a${t[0].axisValue}${e}`}},legend:{type:"scroll",itemWidth:20,itemHeight:5,right:5,top:10,data:t,orient:"vertical",textStyle:{fontSize:12},formatter:function(t){return t.length>6?t.substring(0,6)+"...":t}},grid:{left:"5%",right:"20%",bottom:"5%",top:"5%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:this.hours,axisTick:{show:!1}}],yAxis:[{type:"value",nameLocation:"middle",nameTextStyle:{fontSize:18,padding:25},splitLine:{lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLabel:{formatter:t=>`${t}`}}],series:e}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-car-trend2x1"]],decls:2,vars:3,consts:[[3,"CardSetting"],["echarts","",1,"full",3,"options","theme"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(1),f.nc("options",e.chartOption)("theme",e.theme))},directives:[C.a,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),ve=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.destroyed$=new b.a(1)}ngOnInit(){this.data.chartOption.legend={type:"scroll",itemWidth:20,itemHeight:5,right:50,top:50,data:this.data.chartOption.legend.data,orient:"vertical",textStyle:{fontSize:16,color:"#000000"},formatter:function(t){return t.length>15?t.substring(0,15)+"\n"+t.substring(16):t}},delete this.data.chartOption.yAxis.max}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u8def\u6bb5\u5206\u6642\u884c\u99db\u901f\u7387\u8da8\u52e2",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-car-trend2x1-large-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],[1,"full"],["echarts","",1,"full",3,"options","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u8def\u6bb5\u5206\u6642\u5728\u7dda\u8eca\u8f1b\u6578\u8da8\u52e2"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content",4),f.Wb(10,"div",5),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.data.chartOption))},directives:[p.h,d.a,r.a,p.d,p.e,o.a],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),_e=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.roadKpiService=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(te),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-car-trend2x1-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),Oe=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a}ngOnInit(){}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-kpi"]],decls:9,vars:0,consts:[[1,"container"],[1,"item1"],[1,"item2"],[1,"item3"],[1,"item4"],[1,"item5"],[1,"item6"],[1,"map-layout-control"],[1,"bg-map"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Rb(1,"app-road-speed-rate1x2",1),f.Rb(2,"app-road-car-rate1x2",2),f.Rb(3,"app-road-speed-trend2x1",3),f.Rb(4,"app-road-speed-single1x1",4),f.Rb(5,"app-road-car-single1x1",5),f.Rb(6,"app-road-car-trend2x1",6),f.Rb(7,"app-map-control",7),f.Vb(),f.Rb(8,"app-main-map",8))},directives:[ie,ce,de,ge,xe,Ce,v.a,w.a],styles:['.container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item1 switch . . . item2" "item1 switch . . . item2" "item3 item3 item4 item5 item6 item6"}.item1[_ngcontent-%COMP%]{grid-area:item1;z-index:1}.item2[_ngcontent-%COMP%]{grid-area:item2;z-index:1}.item3[_ngcontent-%COMP%]{grid-area:item3;z-index:1}.item4[_ngcontent-%COMP%]{grid-area:item4;z-index:1}.item5[_ngcontent-%COMP%]{grid-area:item5;z-index:1}.item6[_ngcontent-%COMP%]{grid-area:item6;z-index:1}.map-layout-control[_ngcontent-%COMP%]{grid-area:switch;z-index:1;width:52px;position:relative;bottom:0;left:0;margin-top:auto}.map-explan-target[_ngcontent-%COMP%]{grid-area:explan;z-index:1;margin-top:auto;margin-left:auto}@media (max-width:1024px){.container[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,minmax(250px,32%));grid-template-areas:"item1 item1 . . item2 item2" "item1 item1 . . item2 item2" "item3 item3 item3 item6 item6 item6"}.item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .map-layout-control[_ngcontent-%COMP%]{display:none}}@media (max-width:800px){.container[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;padding-top:16px;gap:0 0;grid-template-columns:repeat(1,minmax(100px,100%));grid-template-rows:repeat(6,max(400px));grid-template-areas:"item1" "item2" "item3" "item4" "item5" "item6"}.item1[_ngcontent-%COMP%], .item2[_ngcontent-%COMP%], .item3[_ngcontent-%COMP%]{max-width:100%}.item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%]{display:block}.item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%]{max-width:100%}}.num[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.num[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:130px;font-weight:600}.unit[_ngcontent-%COMP%]{text-align:right;margin-bottom:0}.unit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:-30px;font-size:25px}.red[_ngcontent-%COMP%]{color:#ad2362}.orange[_ngcontent-%COMP%]{color:#e88c26}.green[_ngcontent-%COMP%]{color:#83ba45}']}),t})(),Se=(()=>{class t{constructor(t){this.viewContainerRef=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(f.S))},t.\u0275dir=f.Lb({type:t,selectors:[["","customHost",""]]}),t})(),ke=(()=>{class t{constructor(t,e){this.dialog=t,this.centerSvc=e,this.now=u().format("YYYY/MM/DD HH:mm"),this.customOptions={loop:!0,autoplay:!0,center:!1,autoplayTimeout:15e3,dots:!0,autoWidth:!0,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.include="project",this.start=!1,this.NewAPISwitch=!1,this.projectBus$=new W.a,this.dynamicTimer={projectBus:3e5},this._0=this.centerSvc.pages$.pipe(Object(E.a)(100)).subscribe(t=>{t[this.include]&&t[this.include]>0?(this.NewAPISwitch=!0,this.getNext(this.projectBus$,"/api/bus/info")):this.NewAPISwitch=!1}),this._1=Object(I.a)(this.dynamicTimer.projectBus).pipe(Object(L.a)(0),Object(R.a)(t=>this.NewAPISwitch)).subscribe(t=>{this.getNext(this.projectBus$,"/api/bus/info")})}getNext(t,e){this.start=!0,this.centerSvc.get(e).subscribe(e=>{t.next(e)})}}return t.\u0275fac=function(e){return new(e||t)(f.ac(p.b),f.ac(x.a))},t.\u0275prov=f.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Me=".red[_ngcontent-%COMP%]{color:#ad2362}.orange[_ngcontent-%COMP%]{color:#e88c26}.green[_ngcontent-%COMP%]{color:#83ba45}.gray[_ngcontent-%COMP%]{color:#b2b2b1}.num[_ngcontent-%COMP%]{font-size:36px;font-weight:600}@media (max-width:1280px){.num[_ngcontent-%COMP%]{font-size:24px}}.unit[_ngcontent-%COMP%]{font-size:24px;font-weight:600}@media (max-width:1280px){.unit[_ngcontent-%COMP%]{font-size:18px}}.center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{font-size:100px;font-weight:600}.center[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{font-size:50px;font-weight:600}p[_ngcontent-%COMP%]{text-align:center;margin-bottom:0;white-space:nowrap}";let Pe=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerSVC=e,this.parkingLotSVC=a,this.destroyed$=new b.a(1),this.recordFilterData={},this.now=u().format("YYYY/MM/DD HH:mm"),this.allRate=0,this.allLeftspace=0,this.allTotalVolume=0,this.allData={},this.parking_all={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/icon-parking.png",title:"\u6574\u9ad4\u505c\u8eca\u7387",updateTime:this.now,openFilter(){this.dialog.open(De,{width:"800px"})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578  (-1\u8868\u793a\u7121\u8cc7\u6599)\n\n2. \u984f\u8272\u8aaa\u660e\uff1a\u505c\u8eca\u7387 <50%\u7da0\u8272\u300150% <= \u505c\u8eca\u7387 < 80%\u6a58\u8272\u3001\u505c\u8eca\u7387 >= 80%\u7d05\u8272\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u505c\u8eca\u7387\u905480%\n\n4. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n5. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"}}ngOnInit(){this.centerSVC.component$.next({page:"parking-lot",exist:!0}),this.parkingLotSVC.parkRateMap$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{if(Object.keys(t).length>0){if(this.allData=t,this.now=this.parkingLotSVC.rateTime,localStorage.getItem("app-parking-lot-overall1x1"+this.carType)){const e=Object.keys(JSON.parse(localStorage.getItem("app-parking-lot-overall1x1"+this.carType)));this.recordFilterData=this.coverData(e,t)}else this.recordFilterData=this.getDefult(t);this.getAllRate(this.recordFilterData),this.changeData()}})}coverData(t,e){const a={};return t.forEach(t=>{a[t]=e[t]}),a}getDefult(t){const e={};return"car"===this.carType?this.parkingLotSVC.parkSingle.forEach(a=>{t[a]&&(e[a]=t[a])}):this.parkingLotSVC.parkMoto.forEach(a=>{t[a]&&(e[a]=t[a])}),e}getAllRate(t){let e=0,a=0,i=0;Object.values(t).forEach(t=>{-999!==t.rate&&-1!==t.leftspace&&(a+=1,e+=t.leftspace,i+=t.volume)}),a>0?(this.allLeftspace=e,this.allTotalVolume=i,this.allRate=Math.round(100*(i-e)/i)):(this.allRate=" - ",this.allLeftspace=" - ",this.allTotalVolume=" - "),this.parking_all.warning=this.allRate>=80}changeData(){this.parking_all={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/icon-parking.png",title:"car"===this.carType?"\u6c7d\u8eca\u6574\u9ad4\u505c\u8eca\u7387":"\u6a5f\u8eca\u6574\u9ad4\u505c\u8eca\u7387",updateTime:this.now,openFilter:()=>{this.dialog.open(Ve,{width:"80vw",height:"80vh",data:"car"===this.carType?this.parkingLotSVC.defaultTreeData:this.parkingLotSVC.defaultMotoTreeData}).afterClosed().subscribe(t=>{t&&(this.recordFilterData=this.getFiterData(t),this.getAllRate(this.recordFilterData))})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u505c\u8eca\u7387=1-\u5269\u9918\u683c\u4f4d\u6578/\u7e3d\u683c\u4f4d\u6578  (-1\u8868\u793a\u7121\u8cc7\u6599)\n\n2. \u984f\u8272\u8aaa\u660e\uff1a\u505c\u8eca\u7387 <50%\u7da0\u8272\u300150% <= \u505c\u8eca\u7387 < 80%\u6a58\u8272\u3001\u505c\u8eca\u7387 >= 80%\u7d05\u8272\n\n3. \u8b66\u793a\u9580\u6abb\uff1a\u505c\u8eca\u7387\u905480%\n\n4. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n5. \u8cc7\u6599\u4f86\u6e90\uff1a\u516c/\u6c11\u71df\u505c\u8eca\u5834API\u3001\u505c\u8eca\u5834\u7a7a\u4f4d\u6578API"}}rateStyle(){return this.allRate>=80?"red":this.allRate<80&&this.allRate>=50?"orange":this.allRate<50&&this.allRate>=0?"green":" - "===this.allRate?"gray":void 0}getFiterData(t){const e={};return t.forEach(t=>{e[t]=this.allData[t]}),e}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerSVC.component$.next({page:"parking-lot",exist:!1}),localStorage.setItem("app-parking-lot-overall1x1"+this.carType,JSON.stringify(this.recordFilterData))}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(Kt))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-parking-lot-overall1x1"]],inputs:{carType:"carType"},decls:11,vars:6,consts:[[3,"CardSetting"],[1,"center"],[3,"ngClass"],[1,"num"],[1,"unit"]],template:function(t,e){1&t&&(f.Wb(0,"app-card1x1",0),f.Wb(1,"p",1),f.Wb(2,"span",2),f.Kc(3),f.Vb(),f.Wb(4,"span",2),f.Kc(5,"%"),f.Vb(),f.Vb(),f.Wb(6,"p"),f.Wb(7,"span",3),f.Kc(8),f.Vb(),f.Wb(9,"span",4),f.Kc(10,"\u5e2d"),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.parking_all),f.Eb(2),f.nc("ngClass",e.rateStyle()),f.Eb(1),f.Lc(e.allRate),f.Eb(1),f.nc("ngClass",e.rateStyle()),f.Eb(4),f.Nc("",e.allLeftspace," / ",e.allTotalVolume,""))},directives:[C.a,i.l],styles:[Me]}),t})(),De=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.all=a,this.parking_rate_one={},this.oneData={},this.oneData=a}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-overall1x1-detail-dialog"]],decls:0,vars:0,template:function(t,e){},styles:[Me]}),t})(),Ve=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.parkingLotSVC=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(Kt),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["parking-lot-overall1x1-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[Me]}),t})();a("gX0l");const $e=function(t){return{height:t}},We=".full[_ngcontent-%COMP%]{width:100%;height:100%}.scroll[_ngcontent-%COMP%]{overflow-y:auto}";let Ie=(()=>{class t{constructor(t,e,a){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.chartTheme="dark",this.now=u().format("YYYY/MM/DD HH:mm"),this.yHeight=0,this.originData=[],this.filter={},this.rateAll=[],this.rate10=[],this.treeList=[],this.chartOption={},this.chartUpdate={},this.theme="dark-theme",this.cardSetting={dialog:this.dialog,belong:"project/roadKpi",icon:"assets/icons/card/icon-car.png",title:"\u8def\u6bb5\u7e3e\u6548\u6392\u540d",updateTime:this.now,openFilter:()=>{this.dialog.open(Le,{width:"80vw",height:"80vh",data:this.treeList}).afterClosed().subscribe(t=>{t&&(this.filter={},t.map(t=>this.filter[t]=!0),this.filterData())})},openLarge:()=>{this.dialog.open(Ee,{width:"80vw",height:"80vh",data:{rateAll:this.rateAll,chartOption:this.chartOption,yHeight:this.yHeight}})},actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\n\n1. \u8a08\u7b97\u65b9\u5f0f\uff1a\u65c5\u884c\u6642\u9593\u6307\u6578(TTI)=\u884c\u99db\u901f\u7387/\u81ea\u7531\u6d41\u901f\u7387\n\n2. \u984f\u8272\u8aaa\u660e\uff1aTTI <= 0.55\u7d05\u8272\u30010.55 < TTI <= 0.65\u6a58\u8272\u3001TTI > 0.65\u7da0\u8272\n\n3. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n4. \u8cc7\u6599\u4f86\u6e90\uff1a\u9ad8\u96c4\u5e02VD\u3001GVP\n\n5. \u5176\u4ed6\u8aaa\u660e\uff1a\u81ea\u7531\u6d41\u901f\u7387\u4f7f\u7528\u51cc\u6668\u6642\u6bb501:00~05:00\u65c5\u884c\u901f\u7387\u8cc7\u6599\u9032\u884c\u6392\u5e8f\uff0c\u53d6\u7b2c85%\u4f4d\u6578(\u5243\u9664\u5c11\u6578\u6975\u7aef\u503c)\u4f5c\u70ba\u5404\u8def\u6bb5\u81ea\u7531\u6d41\u901f\u7387\u3002"}}ngOnInit(){this.filter=localStorage.getItem("app-road-speed-rate2x1")?JSON.parse(localStorage.getItem("app-road-speed-rate2x1")):{"\u81e8\u6d77\u4e8c\u8def(\u6ff1\u6d77\u4e8c\u8def~\u9f13\u5c71\u4e00\u8def)\u5f80\u6771":!0,"\u81e8\u6d77\u4e8c\u8def(\u9f13\u5c71\u4e00\u8def~\u6ff1\u6d77\u4e8c\u8def)\u5f80\u897f":!0,"\u4e94\u798f\u4e09\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u56db\u8def)\u5f80\u6771":!0,"\u4e94\u798f\u4e09\u8def(\u4e2d\u83ef\u56db\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f":!0,"\u4e03\u8ce2\u4e8c\u8def(\u4e03\u8ce2\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u6771":!0,"\u4e03\u8ce2\u4e8c\u8def(\u6210\u529f\u4e00\u8def~\u4e03\u8ce2\u4e09\u8def)\u5f80\u897f":!0,"\u6210\u529f\u4e00\u8def(\u5efa\u570b\u4e09\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357":!0,"\u6210\u529f\u4e8c\u8def(\u5fa9\u8208\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357":!0,"\u6210\u529f\u4e8c\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317":!0,"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317":!0,"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357":!0,"\u4e2d\u83ef\u4e94\u8def(\u5fa9\u8208\u4e09\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357":!0,"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u51f1\u65cb\u56db\u8def)\u5f80\u5357":!0,"\u4e2d\u83ef\u4e94\u8def(\u51f1\u65cb\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5317":!0,"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317":!0,"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317":!0,"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u4e2d\u5c71\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u5c71\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f":!0,"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317":!0,"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357":!0,"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317":!0,"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357":!0,"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771":!0,"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f":!0,"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771":!0,"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f":!0,"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771":!0,"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f":!0},this.centerService.component$.next({page:"road-kpi",exist:!0}),this.roadKpiService.speed_rank$.pipe(Object(R.a)(t=>"success"===t.code),Object(g.a)(this.destroyed$)).subscribe(t=>{this.cardSetting.updateTime=u(t.update_time).format("YYYY/MM/DD HH:mm"),this.originData=t.data,this.treelistBuild(t.data),this.filterData()}),this.centerService.theme$.pipe(Object(g.a)(this.destroyed$)).subscribe(t=>{this.theme=t})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"road-kpi",exist:!1}),localStorage.setItem("app-road-speed-rate2x1",JSON.stringify(this.filter))}treelistBuild(t){let e={},a=1;this.treeList=[],e["\u570b\u6176\u7130\u706b\u9810\u8a2d"]=0,this.treeList.push({text:"\u570b\u6176\u7130\u706b\u9810\u8a2d",value:"\u570b\u6176\u7130\u706b\u9810\u8a2d",collapsed:!0,children:[{text:"\u6210\u529f\u4e00\u8def(\u5efa\u570b\u4e09\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u5efa\u570b\u4e09\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357",value:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u6d77\u908a\u8def)\u5f80\u5357"},{text:"\u6210\u529f\u4e8c\u8def(\u5fa9\u8208\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357",value:"\u6210\u529f\u4e8c\u8def(\u5fa9\u8208\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357"},{text:"\u6210\u529f\u4e8c\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e8c\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e09\u591a\u56db\u8def~\u4e94\u798f\u4e09\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e94\u798f\u4e09\u8def~\u4e2d\u6b63\u56db\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e2d\u6b63\u56db\u8def~\u4e03\u8ce2\u4e8c\u8def)\u5f80\u5317"},{text:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317",value:"\u6210\u529f\u4e00\u8def(\u4e03\u8ce2\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317"},{text:"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357",value:"\u4e2d\u83ef\u56db\u8def(\u4e09\u591a\u56db\u8def~\u5fa9\u8208\u4e09\u8def)\u5f80\u5357"},{text:"\u4e2d\u83ef\u4e94\u8def(\u5fa9\u8208\u4e09\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357",value:"\u4e2d\u83ef\u4e94\u8def(\u5fa9\u8208\u4e09\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5357"},{text:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u51f1\u65cb\u56db\u8def)\u5f80\u5357",value:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u51f1\u65cb\u56db\u8def)\u5f80\u5357"},{text:"\u4e2d\u83ef\u4e94\u8def(\u51f1\u65cb\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5317",value:"\u4e2d\u83ef\u4e94\u8def(\u51f1\u65cb\u56db\u8def~\u6642\u4ee3\u5927\u9053)\u5f80\u5317"},{text:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317",value:"\u4e2d\u83ef\u4e94\u8def(\u6642\u4ee3\u5927\u9053~\u5fa9\u8208\u4e09\u8def)\u5f80\u5317"},{text:"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317",value:"\u4e2d\u83ef\u56db\u8def(\u5fa9\u8208\u4e09\u8def~\u4e09\u591a\u56db\u8def)\u5f80\u5317"},{text:"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u56db\u8def(\u6210\u529f\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u4e2d\u5c71\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u4e2d\u5c71\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u5c71\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u5c71\u4e00\u8def~\u4e2d\u83ef\u4e09\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u56db\u8def(\u4e2d\u83ef\u4e09\u8def~\u6210\u529f\u4e00\u8def)\u5f80\u897f"},{text:"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317",value:"\u6cb3\u6771\u8def(\u6cb3\u5317\u4e8c\u8def~\u5efa\u570b\u4e09\u8def)\u5f80\u5317"},{text:"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357",value:"\u6cb3\u6771\u8def(\u5efa\u570b\u4e09\u8def~\u6cb3\u5317\u4e8c\u8def)\u5f80\u5357"},{text:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317",value:"\u9f13\u5c71\u4e8c\u8def(\u8208\u9686\u8def~\u539a\u751f\u8def)\u5f80\u5317"},{text:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357",value:"\u9f13\u5c71\u4e8c\u8def(\u539a\u751f\u8def~\u8208\u9686\u8def)\u5f80\u5357"},{text:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771",value:"\u4e2d\u8208\u8def(\u904e\u6e2f\u96a7\u9053~\u65b0\u751f\u8def)\u5f80\u6771"},{text:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f",value:"\u4e2d\u8208\u8def(\u65b0\u751f\u8def~\u904e\u6e2f\u96a7\u9053)\u5f80\u897f"},{text:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771",value:"\u5efa\u570b\u4e09\u8def(\u5e02\u4e2d\u4e00\u8def~\u81ea\u5f37\u4e00\u8def)\u5f80\u6771"},{text:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f",value:"\u5efa\u570b\u4e09\u8def(\u81ea\u5f37\u4e00\u8def~\u5e02\u4e2d\u4e00\u8def)\u5f80\u897f"},{text:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771",value:"\u4e2d\u6b63\u4e09\u8def(\u5357\u83ef\u8def~\u6797\u68ee\u4e00\u8def)\u5f80\u6771"},{text:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f",value:"\u4e2d\u6b63\u4e09\u8def(\u6797\u68ee\u4e00\u8def~\u5357\u83ef\u8def)\u5f80\u897f"}]}),t.forEach(t=>{e.hasOwnProperty(t.area_name)?this.treeList[e[t.area_name]].children.push({text:t.name,value:t.name}):(e[t.area_name]=a,a++,this.treeList.push({text:t.area_name,value:"",collapsed:!0,children:[{text:t.name,value:t.name}]}))})}filterData(){let t=[],e=[],a=[];this.rateAll=0===Object.keys(this.filter).length?this.originData.map(t=>(0===t.speed&&(t.speed=null,t.tti=null),t)):this.originData.filter(t=>this.filter[t.name]).map(t=>(0===t.speed&&(t.speed=null,t.tti=null),t)),this.yHeight=60*this.rateAll.length,this.rateAll.sort((t,e)=>t.tti-e.tti),this.rateAll.filter(t=>t.tti).slice(0,5).forEach(i=>{let n,o;i.tti?(n=Math.round(100*i.tti)/100,o=i.name+"&&"+n+" "+i.speed):(n=999,o=i.name+"&&-- --"),t.push(o),e.push(1),a.push(n>.65?{value:n,itemStyle:{color:"#83BA45"}}:n<=.55?{value:n,itemStyle:{color:"#AD2362"}}:{value:n,itemStyle:{color:"#E88C26"}})}),this.chartOption={backgroundColor:"transparent",grid:{top:"6%",left:"5%",right:"14%",bottom:"12%"},xAxis:{type:"value",min:0,max:1,splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:t,inverse:!1,animationDuration:300,animationDurationUpdate:300,max:4},title:{text:"TTI   km/hr",right:5,top:-5,textStyle:{fontWeight:"normal",fontSize:14,fontFamily:"oswald"}},series:[{realtimeSort:!0,type:"bar",data:e,barGap:"-100%",label:{show:!0,position:"right",valueAnimation:!0,formatter:function(t){let e=t.name.split("&&")[1].split(" ");for(e[0].indexOf(".")<0&&"--"!=e[0]&&(e[0]+=".");e[0].length<4&&"--"!=e[0];)e[0]+="0";return e[0]+"   "+e[1]},textStyle:{fontSize:12}},itemStyle:{color:"rgba(180, 180, 180, 0.2)"},showBackground:!1},{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:a,label:{show:!0,position:"insideTopLeft",align:"left",offset:[-5,-18],valueAnimation:!0,formatter:function(t){return t.name.split("&&")[0]},textStyle:{fontSize:14}},showBackground:!1}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-road-speed-rate2x1"]],decls:2,vars:4,consts:[[3,"CardSetting"],["echarts","",1,"full",3,"theme","options","merge"]],template:function(t,e){1&t&&(f.Wb(0,"app-card2x1",0),f.Rb(1,"div",1),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(1),f.nc("theme",e.theme)("options",e.chartOption)("merge",e.chartUpdate))},directives:[j.a,o.a],styles:[We]}),t})(),Ee=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.roadKpiService=a,this.destroyed$=new b.a(1),this.dialogUpdate={},this.data.chartOption.series[1].label.formatter=function(t){return t.name.split("&&")[0]},delete this.data.chartOption.yAxis.max}ngOnInit(){this.yHeight=this.data.yHeight;let t=[],e=[],a=[];this.data.rateAll.forEach(i=>{let n,o;i.tti?(n=Math.round(100*i.tti)/100,o=i.name+"&&"+n+" "+i.speed):(n=999,o=i.name+"&&-- --"),t.push(o),e.push(1),a.push(999===n?{value:n,itemStyle:{color:"#AD2362"}}:n>.65?{value:n,itemStyle:{color:"#83BA45"}}:n<=.55?{value:n,itemStyle:{color:"#AD2362"}}:{value:n,itemStyle:{color:"#E88C26"}})}),this.dialogUpdate={grid:{top:"60px",bottom:"0%",left:"0%",right:"7%"},yAxis:{data:t},title:{text:"TTI   km/hr",right:5,top:48,textStyle:{fontWeight:"normal",fontSize:16,fontFamily:"oswald"}},series:[{data:e,label:{textStyle:{fontSize:16,color:"#000000"}}},{data:a,barCategoryGap:"50%",label:{offset:[-5,-22],formatter:function(t){return t.name.split("&&")[0]},textStyle:{fontSize:16,color:"#000000"}}}]}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onChartInit(t){this.echartsInstance=t}downloadEcharts(){const t=document.createElement("a");t.href=this.echartsInstance.getDataURL({type:"png",pixelRatio:1,backgroundColor:"white",excludeComponents:null}),t.download="\u8def\u6bb5\u7e3e\u6548\u6392\u540d",t.click()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(te))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-rate2x1-large-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],[1,"dialog-title"],["mat-button","",1,"dialog-download",3,"click"],["mat-button","","mat-dialog-close","",1,"dialog-close"],["echarts","",3,"options","merge","ngStyle","chartInit"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Wb(1,"span",1),f.Kc(2,"\u8def\u6bb5\u7e3e\u6548\u6392\u540d"),f.Vb(),f.Wb(3,"button",2),f.dc("click",function(){return e.downloadEcharts()}),f.Wb(4,"mat-icon"),f.Kc(5,"download"),f.Vb(),f.Vb(),f.Wb(6,"button",3),f.Wb(7,"mat-icon"),f.Kc(8,"close"),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"mat-dialog-content"),f.Wb(10,"div",4),f.dc("chartInit",function(t){return e.onChartInit(t)}),f.Vb(),f.Vb()),2&t&&(f.Eb(10),f.nc("options",e.data.chartOption)("merge",e.dialogUpdate)("ngStyle",f.qc(3,$e,e.yHeight+"px")))},directives:[p.h,d.a,r.a,p.d,p.e,o.a,i.o],styles:[We]}),t})(),Le=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.roadKpiService=e,this.data=a,this.backData=[],this.treeList=[],this.treeList=a}getName(t){this.backData=t}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(te),f.Qb(p.a))},t.\u0275cmp=f.Kb({type:t,selectors:[["road-speed-rate2x1-filter-dialog"]],decls:7,vars:2,consts:[[3,"treeList","getName"],["align","end",1,"btn"],["mat-raised-button","","cdkFocusInitial","","type","submit",1,"button-filter-sure",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial","","type","submit",1,"button-filter-cancel"]],template:function(t,e){1&t&&(f.Wb(0,"mat-dialog-content"),f.Wb(1,"app-checkbox-tree",0),f.dc("getName",function(t){return e.getName(t)}),f.Vb(),f.Vb(),f.Wb(2,"mat-dialog-actions",1),f.Wb(3,"button",2),f.Kc(4,"\u78ba\u8a8d"),f.Vb(),f.Wb(5,"button",3),f.Kc(6,"\u53d6\u6d88"),f.Vb(),f.Vb()),2&t&&(f.Eb(1),f.nc("treeList",e.treeList),f.Eb(2),f.nc("mat-dialog-close",e.backData))},directives:[p.e,z.a,p.c,d.a,p.d],styles:[We]}),t})();var Re=a("yEWQ");let Te=(()=>{class t{constructor(t,e){this.centerService=t,this.projectService=e,this.destroyed$=new b.a(1),this.goPeople=0,this.goCount=0,this.backPeople=0,this.backCount=0,this.busDict={},this.busArray=["\u65d7\u6d25\u7dda","\u9ad8\u6d41\u7dda"],this.now=u().format("YYYY/MM/DD HH:mm"),this.cardSetting={belong:"project/home",icon:"assets/icons/card/icon-people.png",title:"\u63a5\u99c1\u8eca\u7d2f\u8a08\u8f09\u5ba2\u7d71\u8a08",updateTime:this.now,actionsOn:!1,help:"\u8cc7\u6599\u8aaa\u660e\uff1a\n\n1. \u8cc7\u6599\u983b\u7387\uff1a5\u5206\u9418\n\n2. \u8cc7\u6599\u4f86\u6e90\uff1aGoogle\u8868\u55ae\u7531\u73fe\u5834\u4eba\u54e1\u8f38\u5165\u63a5\u99c1\u8eca\u51fa\u767c\u8d9f\u6b21\u8207\u8f09\u904b\u4eba\u6b21\n"}}ngOnInit(){this.defaultArray&&0!==this.defaultArray.length&&(this.busArray=this.defaultArray),this.centerService.component$.next({page:"project",exist:!0}),this.projectService.projectBus$.pipe(Object(R.a)(t=>"success"===t.code&&t.data.length>0),Object(g.a)(this.destroyed$)).subscribe(t=>{this.busDict={};let e="";t.data.forEach(a=>{this.busDict.hasOwnProperty(a.name)||(this.busDict[a.name]={name:a.name,goPeople:0,goCount:0,backPeople:0,backCount:0}),1===a.direction?(this.busDict[a.name].goPeople=a.people,this.busDict[a.name].goCount=a.count):2===a.direction&&(this.busDict[a.name].backPeople=a.people,this.busDict[a.name].backCount=a.count),t.data[0].src_time>e&&(e=t.data[0].src_time)}),this.cardSetting.updateTime=u(e).format("YYYY/MM/DD HH:mm"),Object(I.a)(5e3).pipe(Object(L.a)(0),Object(g.a)(this.destroyed$)).subscribe(t=>{const e=this.busArray[t%2];this.busDict[e]&&(this.cardSetting.title=this.busDict[e].name+"\u7d2f\u8a08\u8f09\u5ba2\u7d71\u8a08",this.goPeople=this.busDict[e].goPeople,this.goCount=this.busDict[e].goCount,this.backPeople=this.busDict[e].backPeople,this.backCount=this.busDict[e].backCount)})})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.centerService.component$.next({page:"project",exist:!1})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(x.a),f.Qb(ke))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-home-bus-count1x1"]],inputs:{defaultArray:"defaultArray"},decls:36,vars:17,consts:[[3,"CardSetting"],[1,"full"],[1,"two-division"],[1,"text-area"],[1,"bg-green"],[1,"data-area"],[1,"count"],[1,"text"],[1,"number"],[1,"bg-blue"]],template:function(t,e){1&t&&(f.Wb(0,"app-arc1x1",0),f.Wb(1,"div",1),f.Wb(2,"div",2),f.Wb(3,"div",3),f.Wb(4,"span",4),f.Kc(5,"\u5f80"),f.Vb(),f.Vb(),f.Wb(6,"div",5),f.Wb(7,"div",6),f.Wb(8,"span",7),f.Kc(9,"\u4eba\u6b21"),f.Vb(),f.Wb(10,"span",8),f.Kc(11),f.ic(12,"number"),f.Vb(),f.Vb(),f.Wb(13,"div",6),f.Wb(14,"span",7),f.Kc(15,"\u8d9f\u6b21"),f.Vb(),f.Wb(16,"span",8),f.Kc(17),f.ic(18,"number"),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(19,"div",2),f.Wb(20,"div",3),f.Wb(21,"span",9),f.Kc(22,"\u8fd4"),f.Vb(),f.Vb(),f.Wb(23,"div",5),f.Wb(24,"div",6),f.Wb(25,"span",7),f.Kc(26,"\u4eba\u6b21"),f.Vb(),f.Wb(27,"span",8),f.Kc(28),f.ic(29,"number"),f.Vb(),f.Vb(),f.Wb(30,"div",6),f.Wb(31,"span",7),f.Kc(32,"\u8d9f\u6b21"),f.Vb(),f.Wb(33,"span",8),f.Kc(34),f.ic(35,"number"),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&t&&(f.nc("CardSetting",e.cardSetting),f.Eb(11),f.Lc(-1===e.goPeople?"--":f.kc(12,5,e.goPeople,"1.0-0")),f.Eb(6),f.Lc(-1===e.goCount?"--":f.kc(18,8,e.goCount,"1.0-0")),f.Eb(11),f.Lc(-1===e.backPeople?"--":f.kc(29,11,e.backPeople,"1.0-0")),f.Eb(6),f.Lc(-1===e.backCount?"--":f.kc(35,14,e.backCount,"1.0-0")))},directives:[Re.a],pipes:[i.f],styles:[".full[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]{width:50%;height:100%}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]{width:100%;height:36px;display:flex;justify-content:center;align-items:center;color:#fff}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .text-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:36px;height:36px;font-size:25px;line-height:36px;font-weight:600;border-radius:50%;display:flex;justify-content:center;align-items:center}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]{width:100%;height:calc(100% - 36px);display:flex;flex-direction:column;justify-content:space-between}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{width:100%;height:45%}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:90%;padding-left:10%;height:14px;display:flex;flex-direction:row;justify-content:flex-start;font-size:14px}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{width:90%;padding-right:10%;height:36px;line-height:36px;display:flex;flex-direction:row;justify-content:flex-end;align-items:flex-end;font-size:36px;font-weight:600}@media (max-width:1280px){.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:24px}}@media (max-width:1024px){.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]   .data-area[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:36px}}.full[_ngcontent-%COMP%]   .two-division[_ngcontent-%COMP%]:first-child   .data-area[_ngcontent-%COMP%]{border-right:1px solid}.bg-green[_ngcontent-%COMP%]{background-color:#6cd34f}.bg-blue[_ngcontent-%COMP%]{background-color:#00caf9}"]}),t})();const Ae=function(){return["\u65d7\u6d25\u7dda","\u9ad8\u6d41\u7dda"]},Ke=function(){return["\u53f0\u9435\u9f13\u5c71\u7dda","\u65d7\u9f13\u822a\u7dda"]};function je(t,e){}let ze=(()=>{class t{constructor(t,e,a,i,n){this.dialog=t,this.centerService=e,this.roadKpiService=a,this.projectService=i,this.parkingLotSVC=n,this.now=u().format("YYYY/MM/DD HH:mm"),this.parking_rate_chartUpdate={},this.parking_rate_chartOption={grid:{top:"0%",left:"20%",right:"0%",bottom:"0%"},xAxis:{max:100,splitLine:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},type:"category",data:["A","B","C","D","E"],inverse:!0,animationDuration:500,animationDurationUpdate:500,max:4},series:[{realtimeSort:!0,type:"bar",barCategoryGap:"60%",data:[{value:0,itemStyle:{color:"#83BA45"}},{value:0,itemStyle:{color:"#83BA45"}},{value:0,itemStyle:{color:"#83BA45"}},{value:0,itemStyle:{color:"#83BA45"}},{value:0,itemStyle:{color:"#83BA45"}}],label:{show:!0,position:"insideRight",valueAnimation:!0,formatter:"{c}%",textStyle:{fontSize:20,color:"#FFFFFF"}},showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}],animationDuration:0,animationDurationUpdate:500,animationEasing:"linear",animationEasingUpdate:"linear"},this.parking_rate={dialog:this.dialog,belong:"project/home",icon:"assets/icons/card/icon-parking.png",title:"\u505c\u8eca\u5834\u505c\u8eca\u7387\u6392\u540d",updateTime:this.now,openFilter(){this.dialog.open(Qe,{width:"800px"})},openLarge(){this.dialog.open(Ne,{width:"800px"})},actionsOn:!1,help:"\u5c0f\u5e6b\u624b \n\u5c0f\u5e6b\u5e6b\u5e6b\u624b"}}ngOnInit(){setInterval(()=>this.run(),3e3)}ngOnDestroy(){}run(){let t=this.parking_rate_chartOption.series[0].data;for(var e=0;e<t.length;++e){let a=Math.round(100*Math.random());t[e]=a>=80?{value:a,itemStyle:{color:"#AD2362"}}:a>60?{value:a,itemStyle:{color:"#E88C26"}}:{value:a,itemStyle:{color:"#83BA45"}}}this.parking_rate_chartUpdate={series:{data:t}}}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.b),f.Qb(x.a),f.Qb(te),f.Qb(ke),f.Qb(Kt))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-project"]],decls:10,vars:4,consts:[[1,"container"],["carType","car",1,"item1"],["carType","moto",1,"item2"],[1,"item3"],[1,"item4"],[1,"item5"],[1,"item8",3,"defaultArray"],[1,"item7",3,"defaultArray"],[1,"map-layout-control"],[1,"bg-map"]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Rb(1,"app-parking-lot-overall1x1",1),f.Rb(2,"app-parking-lot-overall1x1",2),f.Rb(3,"app-road-speed-rate2x1",3),f.Rb(4,"app-crowd-place-people",4),f.Rb(5,"app-crowd-mrt",5),f.Rb(6,"app-home-bus-count1x1",6),f.Rb(7,"app-home-bus-count1x1",7),f.Rb(8,"app-map-control",8),f.Rb(9,"app-main-map",9),f.Vb()),2&t&&(f.Eb(6),f.nc("defaultArray",f.pc(2,Ae)),f.Eb(1),f.nc("defaultArray",f.pc(3,Ke)))},directives:[Pe,Ie,It,Mt,Te,v.a,w.a],styles:['.container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 120px - 16px);display:grid;padding-top:calc(120px + 16px);grid-gap:16px 16px;overflow:hidden;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item1 switch . . . item8" "item2 switch . . . item7" "item3 item3 item4 item4 item5 item5"}.item1[_ngcontent-%COMP%]{grid-area:item1;z-index:1}.item2[_ngcontent-%COMP%]{grid-area:item2;z-index:1}.item3[_ngcontent-%COMP%]{grid-area:item3;z-index:1}.item4[_ngcontent-%COMP%]{grid-area:item4;z-index:1}.item5[_ngcontent-%COMP%]{grid-area:item5;z-index:1}.item6[_ngcontent-%COMP%]{grid-area:item6;z-index:1}.item7[_ngcontent-%COMP%]{grid-area:item7;z-index:1}.item8[_ngcontent-%COMP%]{grid-area:item8;z-index:1}@media (max-width:1024px){.container[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,minmax(250px,32%));grid-template-areas:"item1 item1 . . item8 item8" "item2 item2 . . item7 item7" "item3 item3 item4 item4 item5 item5"}.item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%], .map-layout-control[_ngcontent-%COMP%]{display:none}}@media (max-width:800px){.container[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:0 0;grid-template-columns:repeat(1,minmax(100px,100%));grid-template-rows:repeat(8,minmax(250px,400px));grid-template-areas:"item1" "item2" "item3" "item4" "item5" "item7" "item8"}.item1[_ngcontent-%COMP%], .item2[_ngcontent-%COMP%], .item3[_ngcontent-%COMP%], .item4[_ngcontent-%COMP%]{max-width:95vw;z-index:1}.item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%]{display:block}.item5[_ngcontent-%COMP%], .item6[_ngcontent-%COMP%], .item7[_ngcontent-%COMP%], .item8[_ngcontent-%COMP%]{max-width:95vw;z-index:1}}.leftside-area[_ngcontent-%COMP%]{width:16.6%;height:66%;position:relative;float:left;display:flex;flex-direction:column;justify-content:space-between;padding:8px 0}.leftside-area[_ngcontent-%COMP%]   .card-area[_ngcontent-%COMP%]{width:100%;height:calc(50% - 16px)}.leftside-area[_ngcontent-%COMP%]   .card-area[_ngcontent-%COMP%]   app-card1x1[_ngcontent-%COMP%]{width:100%;height:100%}.rightside-area[_ngcontent-%COMP%]{width:16.6%;height:66%;position:relative;float:right;display:flex;flex-direction:column;justify-content:space-between;padding:8px 0}.rightside-area[_ngcontent-%COMP%]   .card-area[_ngcontent-%COMP%]{width:100%;height:calc(50% - 16px)}.rightside-area[_ngcontent-%COMP%]   .card-area[_ngcontent-%COMP%]   app-arc1x1[_ngcontent-%COMP%]{width:100%;height:100%}.bottomside-area[_ngcontent-%COMP%]{width:100%;height:34%;padding:8px 0;position:relative;display:flex}.bottomside-area[_ngcontent-%COMP%]   .card-area1x1[_ngcontent-%COMP%]{width:16%;margin-right:16px;float:left;display:flex}.bottomside-area[_ngcontent-%COMP%]   .card-area1x1[_ngcontent-%COMP%]   app-cctv-carousel[_ngcontent-%COMP%]{max-width:100%;width:320px}.bottomside-area[_ngcontent-%COMP%]   .card-area[_ngcontent-%COMP%]{width:33%;height:100%;margin-right:16px;float:left;display:flex}.bottomside-area[_ngcontent-%COMP%]   .card-area[_ngcontent-%COMP%]   app-card2x1[_ngcontent-%COMP%], .full[_ngcontent-%COMP%]{width:100%;height:100%}.flex-center[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-end}.flex-center[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px;padding:0 5px}.flex-center[_ngcontent-%COMP%]   .h-36px[_ngcontent-%COMP%]{height:36px}.flex-center[_ngcontent-%COMP%]   .font60[_ngcontent-%COMP%]{font-size:36px}.flex-center[_ngcontent-%COMP%]   .border-radius-20px[_ngcontent-%COMP%]{border-radius:20px}.flex-center[_ngcontent-%COMP%]   .bg-38B7A9[_ngcontent-%COMP%]{background-color:#38b7a9}.flex-center[_ngcontent-%COMP%]   .bg-548AC1[_ngcontent-%COMP%]{background-color:#548ac1}.flex-center[_ngcontent-%COMP%]   .bg-AD2362[_ngcontent-%COMP%]{background-color:#ad2362}.bus_people-chart[_ngcontent-%COMP%]{width:100%;height:30%}.map-layout-control[_ngcontent-%COMP%]{grid-area:switch;width:52px;z-index:1;position:relative;bottom:0;left:0;margin-top:auto}.map-explan-target[_ngcontent-%COMP%]{grid-area:explan;z-index:1;margin-top:auto;margin-left:auto}.blue-green[_ngcontent-%COMP%]{color:#38b7a9}.gray[_ngcontent-%COMP%]{color:#b2b2b1}']}),t})(),Ne=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.data=e,this.viewContainerRef=a,this.componentFactoryResolver=i}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(p.a),f.Qb(f.S),f.Qb(f.j))},t.\u0275cmp=f.Kb({type:t,selectors:[["dialog-overview-example-dialog"]],viewQuery:function(t,e){if(1&t&&f.Oc(Se,1),2&t){let t;f.vc(t=f.ec())&&(e.customHostDirective=t.first)}},decls:2,vars:0,consts:[[1,"full"],["customHostDirective",""]],template:function(t,e){1&t&&(f.Wb(0,"div",0),f.Ic(1,je,0,0,"ng-template",1),f.Vb())},encapsulation:2}),t})(),Qe=(()=>{class t{constructor(t,e){this.dialogRef=t,this.projectService=e,this.names=""}sure(){console.log(this.names)}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(p.g),f.Qb(ke))},t.\u0275cmp=f.Kb({type:t,selectors:[["dialog-overview-example-dialog2"]],decls:6,vars:1,consts:[["matInput","",3,"value","change"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(t,e){1&t&&(f.Wb(0,"input",0),f.dc("change",function(t){return e.names=t.target.value}),f.Vb(),f.Wb(1,"div",1),f.Wb(2,"button",2),f.dc("click",function(){return e.onNoClick()}),f.Kc(3,"\u53d6\u6d88"),f.Vb(),f.Wb(4,"button",2),f.dc("click",function(){return e.sure()}),f.Kc(5,"\u78ba\u5b9a"),f.Vb(),f.Vb()),2&t&&f.nc("value",e.names)},encapsulation:2}),t})();var Ye=a("pgp5"),He=a("F5nt");const Fe=[{path:"firework",redirectTo:"firework/home"},{path:"firework/home",component:ze,data:{animation:"projectPage1"}},{path:"firework/cctvAdvanced",component:D,data:{animation:"projectPage2"}},{path:"firework/parkingLot",component:Xt,data:{animation:"projectPage3"}},{path:"firework/roadKpi",component:Oe,data:{animation:"projectPage4"}},{path:"firework/crowd",component:At,data:{animation:"projectPage5"}},{path:":page_lv1/:page_lv2",component:(()=>{class t{constructor(t,e,a,i,n,o){this.router=t,this.centerSVC=e,this.appService=a,this.renderer=i,this.changeDetectorRef=n,this.componenFactoryResolver=o,this.grid_type="grid_type1"}ngOnInit(){this.page_cfgs=this.centerSVC.get_lv3_cfg(this.router.url),this.grid_type=this.page_cfgs.layout}ngAfterViewInit(){console.log("project ok");const t=this.dynamicComponentLoader.viewContainerRef;t.clear(),this.page_cfgs.components.forEach((e,a)=>{const i=this.componenFactoryResolver.resolveComponentFactory(this.dynamicComponentLoader.component_map[e.name]),n=t.createComponent(i);this.renderer.addClass(n.location.nativeElement,e.class),n.instance.cfg=e.cfg,n.instance.component_idx=a}),this.changeDetectorRef.detectChanges(),this.route_subscribe=this.router.events.subscribe(t=>{t instanceof m.c&&(this.route_subscribe.unsubscribe(),"/cutscenes"!=t.url&&setTimeout(()=>{console.log("proj",t.url),this.centerSVC.redirectUrl$=t.url,this.router.navigate(["/cutscenes"])},100))})}}return t.\u0275fac=function(e){return new(e||t)(f.Qb(m.e),f.Qb(x.a),f.Qb(He.a),f.Qb(f.G),f.Qb(f.h),f.Qb(f.j))},t.\u0275cmp=f.Kb({type:t,selectors:[["app-projectdynamic"]],viewQuery:function(t,e){if(1&t&&f.Oc(Ye.a,1),2&t){let t;f.vc(t=f.ec())&&(e.dynamicComponentLoader=t.first)}},decls:2,vars:3,consts:[["appDynamicComponentHost",""]],template:function(t,e){1&t&&(f.Wb(0,"div"),f.Sb(1,0),f.Vb()),2&t&&f.Gb(e.grid_type)},directives:[Ye.a],styles:['.grid_type1[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item7" "item2 switch . . . item7" "item3 item3 item4 item5 item6 item6"}.grid_type1[_ngcontent-%COMP%], .grid_type2[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%)}.grid_type2[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item6" "item1 switch . . explan item6" "item2 item2 item3 item4 item5 item5"}.grid_type3[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item8" "item1 switch . . . item7" "item2 item2 item3 item4 item5 item6"}.grid_type3[_ngcontent-%COMP%], .grid_type4[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%)}.grid_type4[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item10" "item2 switch . . . item9" "item3 item4 item5 item6 item7 item8"}.grid_type5[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item7" "item2 switch . . . item6" "item3 item3 item4 item4 item5 item5"}.grid_type5[_ngcontent-%COMP%], .grid_type6[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%)}.grid_type6[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item7" "item1 switch . . . item7" "item2 item2 item3 item4 item5 item6"}.grid_type7[_ngcontent-%COMP%]{grid-template-areas:"item1 . . . . item8" "item2 . . . explan item7" "item3 item3 item4 item4 item5 item6"}.grid_type7[_ngcontent-%COMP%], .grid_type8[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%)}.grid_type8[_ngcontent-%COMP%]{grid-template-areas:"item1 switch . . . item7" "item1 switch . . explan item6" "item2 item2 item3 item4 item5 item5"}.grid_type10[_ngcontent-%COMP%]{grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item1 item2 item3 item4 item5 item6" "item7 item8 item9 item10 item11 item12" "item13 item14 item15 item16 item17 item18"}.grid_type10[_ngcontent-%COMP%], .grid_type11[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;gap:16px 16px}.grid_type11[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(100px,24%));grid-template-rows:repeat(2,49%);grid-template-areas:"item1 item2 item3 item4" "item5 item6 item7 item8"}.grid_type12[_ngcontent-%COMP%]{width:100%;height:calc(100% - 136px);display:grid;padding-top:136px;padding-bottom:20px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,32%);grid-template-areas:"item1 switch . . . item8" "item2 switch . . explan item7" "item3 item3 item4 item5 item6 item6"}[_nghost-%COMP%]     .item1{grid-area:item1;z-index:1}[_nghost-%COMP%]     .item2{grid-area:item2;z-index:1}[_nghost-%COMP%]     .item3{grid-area:item3;z-index:1}[_nghost-%COMP%]     .item4{grid-area:item4;z-index:1}[_nghost-%COMP%]     .item5{grid-area:item5;z-index:1}[_nghost-%COMP%]     .item6{grid-area:item6;z-index:1}[_nghost-%COMP%]     .item7{grid-area:item7;z-index:1}[_nghost-%COMP%]     .item8{grid-area:item8;z-index:1}[_nghost-%COMP%]     .item9{grid-area:item9;z-index:1}[_nghost-%COMP%]     .item10{grid-area:item10;z-index:1}[_nghost-%COMP%]     .item11{grid-area:item11;z-index:1}[_nghost-%COMP%]     .item12{grid-area:item12;z-index:1}[_nghost-%COMP%]     .item13{grid-area:item13;z-index:1}[_nghost-%COMP%]     .item14{grid-area:item14;z-index:1}[_nghost-%COMP%]     .item15{grid-area:item15;z-index:1}[_nghost-%COMP%]     .item16{grid-area:item16;z-index:1}[_nghost-%COMP%]     .item17{grid-area:item17;z-index:1}[_nghost-%COMP%]     .item18{grid-area:item18;z-index:1}[_nghost-%COMP%]     .map-layout-control{grid-area:switch;width:52px;z-index:1;position:relative;bottom:0;left:0;margin-top:auto}[_nghost-%COMP%]     .map-explan-target{grid-area:explan;z-index:1;margin-top:130px;margin-left:auto}@media (max-width:1024px){.grid_type1[_ngcontent-%COMP%]{width:100%;height:auto;display:grid;padding-top:16px;gap:16px 16px;grid-template-columns:repeat(6,minmax(100px,16%));grid-template-rows:repeat(3,minmax(250px,32%));grid-template-areas:"item6 item6  . . item1 item1" "item6 item6  . . item1 item1" "item7 item7 item7 . item2 item2"}.item3[_ngcontent-%COMP%], .item4[_ngcontent-%COMP%], .item5[_ngcontent-%COMP%], .map-layout-control[_ngcontent-%COMP%]{display:none}}@media (max-width:800px){[_nghost-%COMP%]     .grid_type1{width:100%;height:100%;display:grid;padding-top:16px;gap:0 0;grid-template-columns:repeat(1,minmax(100px,100%));grid-template-rows:repeat(8,max(400px));grid-template-areas:"item6" "item7" "item1" "item2" "item3" "item4" "item5"}[_nghost-%COMP%]     .item1{max-width:100%}[_nghost-%COMP%]     .item2{max-width:100%}[_nghost-%COMP%]     .item3{max-width:100%}[_nghost-%COMP%]     .item4{max-width:100%}[_nghost-%COMP%]     .item5{max-width:100%}[_nghost-%COMP%]     .item6{max-width:100%}[_nghost-%COMP%]     .item7{max-width:100%}}']}),t})()},{path:":page_lv1",redirectTo:":page_lv1/home"}];let Ue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({imports:[[m.i.forChild(Fe)],m.i]}),t})();var Be=a("nEHF"),Ge=a("bhfF");let Je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.Ob({type:t}),t.\u0275inj=f.Nb({imports:[[i.c,n.a,c.a,Ue,Be.a,p.f,s.d,l.c,d.b,r.b,h.o,Ge.b,o.b.forRoot({echarts:()=>Promise.resolve().then(a.bind(null,"MT78"))})]]}),t})()},gX0l:function(t,e,a){var i,n,o;n=[e,a("MT78")],void 0===(o="function"==typeof(i=function(t,e){if(e){var a=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"];e.registerTheme("macarons",{color:a,title:{textStyle:{fontWeight:"normal",color:"#008acd"}},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{iconStyle:{normal:{borderColor:a[0]}}},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{color:"#008acd",borderColor:"#008acd"},symbol:"emptyCircle",symbolSize:3},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},candlestick:{itemStyle:{color:"#d87a80",color0:"#2ec7c9"},lineStyle:{width:1,color:"#d87a80",color0:"#2ec7c9"},areaStyle:{color:"#2ec7c9",color0:"#b6a2de"}},scatter:{symbol:"circle",symbolSize:4},map:{itemStyle:{color:"#ddd"},areaStyle:{color:"#fe994e"},label:{color:"#d87a80"}},graph:{itemStyle:{color:"#d87a80"},linkStyle:{color:"#2ec7c9"}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}}})}else"ECharts is not Loaded","undefined"!=typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})?i.apply(e,n):i)||(t.exports=o)}}]);